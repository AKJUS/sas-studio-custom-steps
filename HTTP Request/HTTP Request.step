{"creationTimeStamp":"2024-09-05T10:01:50.401Z","modifiedTimeStamp":"2024-09-09T10:01:53.274Z","createdBy":"viyademo01","modifiedBy":"viyademo01","name":"HTTP Request.step","displayName":"HTTP Request.step","localDisplayName":"HTTP Request.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d/copy","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","uri":"/dataFlows/steps/6410a254-9f7b-46b8-aefc-bc7e90d7e06d","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"_inputtable","displayName":"_inputtable","localDisplayName":"_inputtable","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"_outputtable","displayName":"_outputtable","localDisplayName":"_outputtable","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"HTTPRequest\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"HTTP Request\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_inputtable\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input Table:\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_outputtable\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output Table:\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_url\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"URL:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_authtype\",\n\t\t\t\t\t\t\"!=\",\n\t\t\t\t\t\t\"SAS Internal Viya API\"\n\t\t\t\t\t],\n\t\t\t\t\t\"regexp\": \"^(?:[^&]*&\\\\.)*[^&]*$\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_url_internal\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"URL (internal):\",\n\t\t\t\t\t\"placeholder\": \"insert url without server (e.g.: /referenceData/domains)\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$_authtype\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"SAS Internal Viya API\"\n\t\t\t\t\t],\n\t\t\t\t\t\"regexp\": \"^(?:[^&]*&\\\\.)*[^&]*$\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_method\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Method:\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"GET\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"POST\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"PUT\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"DELETE\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"HEAD\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"TRACE\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_payload\",\n\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\"label\": \"Payload:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$_method\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"POST\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\t\"|\",\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\"$_method\",\n\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\"PUT\"\n\t\t\t\t\t\t]\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"InputOptions\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Input Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section6\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Headers\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLineCnt\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Header Lines:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": 8,\n\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_0\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_1\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_2\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_3\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_4\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_5\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_6\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerLine_7\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"'header key' = 'value'\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerLineCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section7\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Authorization\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_authtype\",\n\t\t\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\t\t\"label\": \"Auth Type:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"No Auth\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Basic Auth\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"Bearer Token\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"SAS Internal Viya API\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_username\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Username:\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_authtype\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"Basic Auth\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_password\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Password:\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_authtype\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"Basic Auth\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 2\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_bearer_token\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Token:\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_authtype\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"Bearer Token\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 2\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section5\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Timeout\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text7\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"The number of seconds of inactivity to wait before canceling the HTTP request. 0 means no timeout.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_timeout\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"integer\": false,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"OutputOptions\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Output Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section9\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Output Body\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section3\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Output Table\",\n\t\t\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1,\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"text3\",\n\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\"text\": \"Output HTTP result to step output table.\\nMap the fields from output json structure to output table column.\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_fieldMapping\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textarea\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Field Mapping:\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"json structure | coulmn name\",\n\t\t\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_fieldNotFoundMsg\",\n\t\t\t\t\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\t\t\t\t\"label\": \"If field could not get mapped:\",\n\t\t\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\"value\": \"No Message\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\"value\": \"Show Warning\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\"value\": \"Show Error\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"link1\",\n\t\t\t\t\t\t\t\t\t\"type\": \"link\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Link label 1\",\n\t\t\t\t\t\t\t\t\t\"url\": \"\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_mergeInOut\",\n\t\t\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Add input columns to HTTP output table\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_outputToMacro\",\n\t\t\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Create macro for output column\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_macros\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Columns being mapped to macros:\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\t\t\"$_outputToMacro\",\n\t\t\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section1\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Output Library\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1,\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\"text\": \"Set the name of the SAS library for the HTTP request result. The name can be max 8 characters long.\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_httpoutLib\",\n\t\t\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Output to SAS library\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_httpout\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Output Library:\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"indent\": 0,\n\t\t\t\t\t\t\t\t\t\"regexp\": \"[a-zA-Z0-9]{1,8}\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section2\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Output Folder\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"indent\": 1,\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\"text\": \"Set the output folder and file name to receive the native json result from the HTTP request.\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_http_output_dir\",\n\t\t\t\t\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\t\t\t\t\"label\": \"HTTP Output Folder:\",\n\t\t\t\t\t\t\t\t\t\"pathtype\": \"folder\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"Select folder on SAS Server\",\n\t\t\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"_outputName\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"HTTP Output File Name:\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"httpoutAll\",\n\t\t\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section4\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Header Mapping\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"indent\": 0,\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text6\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"Map HTTP result hearder information to SAS macro variable.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_tagCaseSensetive\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Tag name is case sensetive\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMappingCnt\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Header Mappings:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": 10,\n\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_0\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_1\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_2\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_3\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_4\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_5\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_6\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_7\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_8\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t8\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_headerMapping_9\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"\",\n\t\t\t\t\t\t\t\"placeholder\": \"Header Tag : Macro Variable Name\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_headerMappingCnt\",\n\t\t\t\t\t\t\t\t\">\",\n\t\t\t\t\t\t\t\t9\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section8\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Options\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_debugLevel\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"HTTP Debug Level:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": 3,\n\t\t\t\t\t\t\t\"stepsize\": 1,\n\t\t\t\t\t\t\t\"indent\": 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"_inputtable\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"_outputtable\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"_url\": \"\",\n\t\t\"_url_internal\": \"\",\n\t\t\"_method\": {\n\t\t\t\"value\": \"GET\"\n\t\t},\n\t\t\"_payload\": \"\",\n\t\t\"_headerLineCnt\": 0,\n\t\t\"_headerLine_0\": \"\\\"Content-Type\\\"=\\\"application/json\\\"\",\n\t\t\"_authtype\": {\n\t\t\t\"value\": \"No Auth\"\n\t\t},\n\t\t\"_username\": \"\",\n\t\t\"_password\": \"\",\n\t\t\"_bearer_token\": \"\",\n\t\t\"_timeout\": 0,\n\t\t\"_fieldMapping\": \"\",\n\t\t\"_fieldNotFoundMsg\": {\n\t\t\t\"value\": \"No Message\"\n\t\t},\n\t\t\"_mergeInOut\": false,\n\t\t\"_outputToMacro\": false,\n\t\t\"_macros\": \"\",\n\t\t\"_httpoutLib\": false,\n\t\t\"_httpout\": \"HTTPOUT\",\n\t\t\"_http_output_dir\": \"\",\n\t\t\"_outputName\": \"httpoutAll\",\n\t\t\"_tagCaseSensetive\": false,\n\t\t\"_headerMappingCnt\": 0,\n\t\t\"_headerMapping_1\": \"\",\n\t\t\"_debugLevel\": 0\n\t}\n}","templates":{"SAS":"/***************************************************************************\n* Custom Step: HTTP Request\n* --------------------------------------------------------------------------\n* This custom step executes HTTP requests for methods:\n* GET, PUT, POST, DELETE, HEAD, TRACE \n* --------------------------------------------------------------------------\n* Note: Macros starting with an underscore contain UI variable values\n****************************************************************************/\n/* ----------------------------------------------------------------------- */\n/* Check is an error return and output appropriate message                 */ \n/* The message can be a warning or error. In case of error an              */\n/* the job will stop.                                                      */\n/* ----------------------------------------------------------------------- */\n%macro checkError();\n\t%if &mapKeyError = W %then %do;\n\t\tdata _null_;\n\t\t\tfile print;\t\n\t\t\tput 'WARNING: Could not map field!';\n\t\t\tput \"&mapKeyErrorMsg\";\n\t\t\tput \"&mapKeyErrorMsg2\";\n\t\trun;\n\t\tdata _null_;\n\t\t\tput 'WARNING: Could not map field!';\n\t\t\tput \"&mapKeyErrorMsg\";\n\t\t\tput \"&mapKeyErrorMsg2\";\n\t\trun;\n\t%end;\n\t%if &mapKeyError = E %then %do;\n\t\tdata _null_;\n\t\t\tfile print;\t\n\t\t\tput \"ERROR: Error in field mapping!\";\n\t\t\tput \"&mapKeyErrorMsg\";\n\t\t\tput \"&mapKeyErrorMsg2\";\n\t\t\terror \"ERROR: Error in field mapping!\";\n\t\t\tabort;\n\t\trun;\n\t%end;\n%mend checkError;\n\n\n/* ----------------------------------------------------------------------- */\n/* Check http status. If an error occurs stop the job and print message.   */\n/* ----------------------------------------------------------------------- */\n%macro checkHTTPStatus();\n\t%if %symexist(SYS_PROCHTTP_STATUS_PHRASE) %then %do;\n\t\t%if &SYS_PROCHTTP_STATUS_PHRASE ~= OK %then %do;\n\t\t\tdata _null_;\n\t\t\t\tfile print;\t\n\t\t\t\tput \"ERROR: Could not execute HTTP request!\";\n\t\t\t\tput \"HTTP Status: &SYS_PROCHTTP_STATUS_CODE Message: &SYS_PROCHTTP_STATUS_PHRASE\";\n\t\t\t\terror \"ERROR: Could not execute HTTP request! HTTP Status: &SYS_PROCHTTP_STATUS_CODE Message: &SYS_PROCHTTP_STATUS_PHRASE\";\n\t\t\t\tabort;\n\t\t\trun;\n\t\t%end;\n\t%end;\n%mend checkHTTPStatus;\n\n\n/* ----------------------------------------------------------------------- */\n/* If set in the ui map the output column to macros. The macros have       */\n/* the same names as the columns. Only the first row will be mapped        */\n/* ----------------------------------------------------------------------- */\n%macro mapMacros();\n\t/* make the macros global. Have to do it in a loop as the macrolist is comma separated */\n\t%let macName=.;\n\t%let i=1;\n\t%do %until (&macName = );\n\t\t%let macName= %scan(&_macros, &i);\n\t\t%let i=%eval(&i+1);\n\t\t%if &macName ~= %then %do;\n\t\t\t%global &macName;\n\t\t%end;\n\t%end;\n\n\tdata all;\n\t\tset &_outputtable;\n\n\t\t%let macName=.;\n\t\t%let i=1;\n\t\t%do %until (&macName = );\n\t\t\t%let macName= %scan(&_macros, &i);\n\t\t\t%let i=%eval(&i+1);\n\t\t\t%if &macName ~= %then %do;\n\t\t\t\t/* we only map the first row of the result set to macros */\n\t\t\t\tif _n_ = 1 then\n\t\t\t\t\tcall symput(\"&macName\", &macName);\n\t\t\t%end;\n\t\t%end;\n\trun;\n%mend mapMacros;\n\n/* ----------------------------------------------------------------------- */\n/* Generate the url for internal SAS Viya API calls                        */\n/* ----------------------------------------------------------------------- */\n%macro generateInternalUrl();\n\t/* get the local server name */\n\tdata _null_;\n\t\tcall symput('server', substr(\"&_baseurl\", 1, prxmatch(\"\\/SASStudio/\\\", \"&_baseurl\") - 1));\n\trun;\n\t/* set server and URI */\n\tdata _null_;\n\t\turl= cat(\"&server\", \"&_url_internal\");\n\t\tcall symputx('_url', url);\n\t\tput url=;\n\trun;\n%mend generateInternalUrl;\n\n\n/* ----------------------------------------------------------------------- */\n/* Map the HTTP result to coulmns in a table according to the field mapping*/ \n/* from UI &_fieldMapping.                                                 */\n/* ----------------------------------------------------------------------- */\n%macro mapHTTPToColumns();\n\tfilename PCODE TEMP;\n\tdata _null_;\n\t\tfile PCODE;\n\t\tput \"import pandas as pd\";\n\t\tput \"import json\";\n\t\tput \" \";\n\t\tput \"moveTableToSAS= True\";\n\t\tput \"SAS.symput('mapKeyError_','No')\";\n\t\tput \"SAS.symput('mapKeyErrorMsg_', '')\";\n\t\tput \"SAS.symput('mapKeyErrorMsg2_', '')\";\n\t\tput \" \";\n\t\tput \"httpoutFiles= SAS.symget('outputFolder')\";\n\t\tput \"httpoutAllFile= SAS.symget('_outputName')\";\n\t\tput \"fieldMapping= SAS.symget('_fieldMapping')\";\n\t\tput \"outputTable= SAS.symget('_outputtable')\";\n\t\tput \"fieldNotFoundMsg= SAS.symget('_fieldNotFoundMsg')\";\n\t\tput \" \";\n\t\tput \"try:\";\n\t\tput \"    with open(httpoutFiles +\"\"/\"\" +httpoutAllFile +\"\".json\"\", 'r') as fHttpAll:\";\n\t\tput \"        httpResultAll= json.load(fHttpAll)\";\n\t\tput \"except:\";\n\t\tput \"    httpResultAll= {}\";\n\t\tput \" \";\n\t\tput \"fieldMap1= fieldMapping.replace('\\n','').split(',')\";\n\t\tput \"fieldMap2= []\";\n\t\tput \"#put the field mapping row \"\"columns\"\" in a list and remove leaning and trailing blanks\";\n\t\tput \"for row in fieldMap1:\";\n\t\tput \"    fieldMap2.append(row.replace(' ','').split('|')) \";\n\t\tput \" \";\n\t\tput \"#get column names\";\n\t\tput \"#columns= ['_rowId_']\";\n\t\tput \"columns= []\";\n\t\tput \"for mapField in fieldMap2:\";\n\t\tput \"    try: \";\n\t\tput \"        columns.append(mapField[1])\";\n\t\tput \"        if len(mapField) != 2:\";\n\t\tput \"            print('Error in field mapping!')\";\n\t\tput \"            print('Did you forget a comma? Check field mapping structure.')\";\n\t\tput \"            SAS.symput('mapKeyError_','E')\";\n\t\tput \"            SAS.symput('mapKeyErrorMsg_', 'Error in field mapping!')\";\n\t\tput \"            SAS.symput('mapKeyErrorMsg2_', 'Did you forget a comma? Check field mapping structure.')\";\n\t\tput \"            moveTableToSAS= False\";\n\t\tput \"    except:\";\n\t\tput \"        print('Error in field mapping!')\";\n\t\tput \"        print('Check field mapping structure.')\";\n\t\tput \"        SAS.symput('mapKeyError_','E')\";\n\t\tput \"        SAS.symput('mapKeyErrorMsg_', 'Error in field mapping!')\";\n\t\tput \"        SAS.symput('mapKeyErrorMsg2_', 'Check field mapping structure.')\";\n\t\tput \"        moveTableToSAS= False\";\n\t\tput \" \";\n\t\tput \"rows= []\";\n\t\tput \"for rowNum in httpResultAll:\";\n\t\tput \"    httpResult= httpResultAll[rowNum]\";\n\t\tput \" \";\n\t\tput \"#    row= [rowNum]\";\n\t\tput \"    row= []\";\n\t\tput \"    #go through field maps, read the data for each field and put it in the variables\";\n\t\tput \"    for mapField in fieldMap2:\";\n\t\tput \"        #if the first char is # we ignode the row\";\n\t\tput \"        if mapField[0].strip()[0] != '#':\";\n\t\tput \"            #split the field path and put in a list\";\n\t\tput \"            mappingKey= mapField[0].split('/')\";\n\t\tput \" \";\n\t\tput \"            l= len(mappingKey) #read how deep the field path is\";\n\t\tput \"            for i in range(l):\";\n\t\tput \"                #if the fieldpath level is a number we convert it into an int variable\";\n\t\tput \"                try:\";\n\t\tput \"                    mappingKey[i]= int(mappingKey[i])\";\n\t\tput \"                except:\";\n\t\tput \"                    pass\";\n\t\tput \" \";\n\t\tput \"            #copy the field we want to select into \"\"inputDataField\"\"\";\n\t\tput \"            inputDataField= httpResult\";\n\t\tput \"            for key in mappingKey:\";\n\t\tput \"                try:\";\n\t\tput \"                    inputDataField= inputDataField[key]\";\n\t\tput \"                except:\";\n\t\tput \"                    print(\"\"Cannot find key >\"\" +mapField[0] +\"\"< in row \"\" +str(rowNum))\";\n\t\tput \"                    print(\"\"Row ==> \"\" +str(httpResult))\";\n\t\tput \" \";\n\t\tput \"                    if fieldNotFoundMsg == 'Show Error':\";\n\t\tput \"                        SAS.symput('mapKeyError_','E')\";\n\t\tput \"                        SAS.symput('mapKeyErrorMsg_', \"\"Cannot find key >\"\" +mapField[0] +\"\"< in row \"\" +str(rowNum))\";\n\t\tput \"                        SAS.symput('mapKeyErrorMsg2_', \"\"Row ==> \"\" +str(httpResult))\";\n\t\tput \"                        moveTableToSAS= False\";\n\t\tput \"                    elif fieldNotFoundMsg == 'Show Warning':\";\n\t\tput \"                        inputDataField= ''\";\n\t\tput \"                        SAS.symput('mapKeyError_','W')\";\n\t\tput \"                        SAS.symput('mapKeyErrorMsg_', \"\"Cannot find key >\"\" +mapField[0] +\"\"< in row \"\" +str(rowNum))\";\n\t\tput \"                        SAS.symput('mapKeyErrorMsg2_', \"\"Row ==> \"\" +str(httpResult))\";\n\t\tput \"                        inputDataField= ''\";\n\t\tput \"                    else:\";\n\t\tput \"                        inputDataField= ''\";\n\t\tput \"            row.append(inputDataField)\";\n\t\tput \"    rows.append(row)\";\n\t\tput \"     \";\n\t\tput \"# Create the pandas DataFrame\";\n\t\tput \"if moveTableToSAS:\";\n\t\tput \"    df = pd.DataFrame(rows, columns=columns)\";\n\t\tput \"    SAS.df2sd(df, outputTable)\";\n\trun;\n\t\n\tproc python infile= PCODE; quit;\n\n\t%global mapKeyError; \n\t%global mapKeyErrorMsg mapKeyErrorMsg2;\n\t%let mapKeyError= &mapKeyError_;\n\t%let mapKeyErrorMsg= &mapKeyErrorMsg_;\n\t%let mapKeyErrorMsg2= &mapKeyErrorMsg2_;\n%mend mapHTTPToColumns;\n\n\n/* ----------------------------------------------------------------------- */\n/* Create SAS lib for the http output                                      */\n/* ----------------------------------------------------------------------- */\n%macro outputToLibrary();\n\t/* if in the UI is set to output to SAS library */\n\t%if &_httpoutLib = 1 %then %do;\n\t\tfilename httpout \"&outputFolder./&_outputName..json\";\n\n\t\tlibname &_httpout JSON fileref=httpout NOALLDATA;\n\t%end;\n%mend outputToLibrary;\n\n\n/* ----------------------------------------------------------------------- */\n/* Build dynamic URL/Payload and put it into macro variable parsedString.  */\n/* The parameters in the URL/Payload need to match the column names of the */\n/* input table. E.g. Parameter @ASD@ = column name ASD                     */\n/* The value of the macro variable is a SAS cats() statement.              */\n/* When the statement is executed the parameters are replaced              */\n/* with column values                                                      */\n/* ----------------------------------------------------------------------- */\n%macro setParamaters(stringToParse_);\n\t%let stringToParse= &stringToParse_;\n\n\tfilename PCODE TEMP;\n\t/* Python script to build the dynamic URL */\n\tdata _null_;\n\t\tfile PCODE;\n\t\tput \"import re\";\n\t\tput \"inputStr= SAS.symget('stringToParse')\";\n\t\tput \"outputStr= ''\";\n\t\tput \"  \";\n\t\tput \"#need to replace '&' with & as only using & will trigger a SAS macro\";\n\t\tput \"inputStr= inputStr.replace(\"\"&.\"\", \"\"&\"\")\";\n\t\tput \"  \";\n\t\tput \"regex = r'@[A-Za-z0-9_]*@'\";\n\t\tput \"matches= re.finditer(regex, inputStr, re.IGNORECASE | re.MULTILINE)\";\n\t\tput \" \";\n\t\tput \"#find the parameters and assemble the output line\";\n\t\tput \"start=0\";\n\t\tput \"end=0\";\n\t\tput \"outputStr= \"\"cats(\"\"\";\n\t\tput \"for match in matches:\";\n\t\tput \"    end= match.start()\";\n\t\tput \"    outputStr+= \"\"'\"\" +inputStr[start:end] +\"\"', \"\" +inputStr[match.start()+1:match.end()-1] +\"\", \"\"\";\n\t\tput \"    print(inputStr[start:end])\";\n\t\tput \"    print(start)\";\n\t\tput \"    print(end)\";\n\t\tput \"    start= match.end()\";\n\t\tput \"#add the rest after the last parameter and close the cats statement     \";\n\t\tput \"outputStr+= \"\"'\"\" +inputStr[start:] +\"\"')\"\" \";\n\t\tput \" \";\n\t\tput \"#ned to escape double quotes for SAS environment \";\n\t\tput \"outputStr= outputStr.replace('\"\"', '\"\"\"\"')\t\";\n\t\tput \"SAS.symput('parsedString_', outputStr)\t\";\n\t\tput \"print(\"\"parsedString=\"\" +outputStr) \";\n\trun;\n\n\tproc python infile= PCODE; quit;\n\t%global parsedString;\n\t%let parsedString= &parsedString_;\n%mend setParamaters;\n\n\n/* ----------------------------------------------------------------------- */\n/* make http call.                                                         */\n/* we give each json file a number (rowNum) for each row in the table      */\n/* ----------------------------------------------------------------------- */\n%macro executeHTTP(rowNum);\n\tfilename hdinfo '/tmp/hdinfo.txt';\n\n\t/* we need to rewrite the headerLine macros as otherwise we get an error */\n\t%let i=0;\n\t%do %while(&i < &_headerLineCnt);\n\t\tdata _null_;\n\t\t\tlength headerLine $250;\n\t\t\t/* we need to call the macro differently depending if there is an input table ot not */\n\t\t\t%if &isInputTable = Yes %then %do;\n\t\t\t\theaderLine= %quote('&&_headerLine_&i');\n\t\t\t%end;\n\t\t\t%else %do;\n\t\t\t\theaderLine= \"&&_headerLine_&i\";\n\t\t\t%end;\n\t\t\tcall symput(\"_headerLine_&i\", headerLine);\n\t\trun;\n\t\t%let i= %eval(&i+1);\n\t%end;\n\n\t/* HTTP Request */\n\tfilename httpout \"/tmp/httpout&rowNum..json\";\n\tproc http\n\t\tmethod= \"&_method\"\n\t\turl= &exe_url \n\n\t\t%if %symexist(exe_payload) and (&_method = PUT or &_method = POST) %then %do;\n\t\t\tin= \"&exe_payload\"\n\t\t%end;\n\n\t\tout= httpout\n\t\theaderout= hdinfo\n\t\ttimeout= &_timeout.\n\t\n\t\tCLEAR_CACHE \n\n\t\t%if &_authtype = Basic Auth %then %do;\n\t\t\tusername= \"&_username\"\n\t\t\tpassword= \"&_password\"\n\t\t%end;\n\n\t\t%if &_authtype = Bearer Token %then %do;\n\t\t\toauth_bearer= \"&_bearer_token\";\n\t\t%end;\n\n\t\t%if &_authtype = SAS Internal Viya API %then %do;\n\t\t\toauth_bearer= sas_services\n\t\t%end;\n\t\t;\n\t \theaders \n\n\t\t%let i= 0;\n\t\t%do %while (&i < &_headerLineCnt);\n\t\t\t&&_headerLine_&i \n\t\t\t%let i= %eval(&i+ 1);\n\t\t%end;\n\t\t;\n\t\tdebug level= &_debugLevel;\n\t\tquit;\n\n\t\t%checkHTTPStatus();\n%mend executeHTTP;\n\n\n/* ----------------------------------------------------------------------- */\n/* combine the output from all http calls into one json file               */\n/* ----------------------------------------------------------------------- */\n%macro combineHTTPOutput();\n\tfilename PCODE TEMP;\n\tdata _null_;\n\t\tfile PCODE;\n\t\tput \"import json\";\n\t\tput \"import os\";\n\t\tput \"httpoutFiles= SAS.symget('outputFolder')\";\n\t\tput \"httpoutAllFile= SAS.symget('_outputName')\";\n\t\tput \"try:\";\n\t\tput \"    filesCnt= int(SAS.symget('rowCnt'))\";\n\t\tput \"except:\";\n\t\tput \"    filesCnt= 0\";\n\t\tput \"httpAll={}\";\n\t\tput \" \";\n\t\tput \"for i in range(filesCnt):\";\n\t\tput \"    try:\";\n\t\tput \"        with open(f'/tmp/httpout{i+1}.json', 'r') as fHttp:\";\n\t\tput \"            httpOut= json.load(fHttp)\";\n\t\tput \"            httpAll[i+1]= httpOut\";\n\t\tput \"    except:\";\n\t\tput \"        httpAll[i+1]= {}\";\n\t\tput \" \";\n\t\tput \"for i in range(filesCnt):\";\n\t\tput \"    try:\";\n\t\tput \"        os.remove(f'/tmp/httpout{i+1}.json')\";\t\n\t\tput \"    except:\";\n\t\tput \"        continue\";\n\t\tput \" \";\n\t\tput \"httpAllJson= json.dumps(httpAll)\";\n\t\tput \"with open(httpoutFiles +f'/{httpoutAllFile}.json', 'w') as fHttpAll:\";\n\t\tput \"    fHttpAll.write(httpAllJson)\";\n\trun;\n\n\tproc python infile= PCODE; quit;\n%mend combineHTTPOutput;\n\n\n/* ----------------------------------------------------------------------- */\n/* call http for each row in the input table.                              */\n/* ----------------------------------------------------------------------- */\n%macro callRequestForInputTable();\n\tdata _null_;\n\t\tset &_inputtable end= _last_;\n\t\t\n\t\trowNum= _n_; \n\t\turl= &url; /* &url can either be the generated or the original url. */\n\t\tcall symput(\"exe_url\", cats(\"'\", trim(url), \"'\"));\n\n\t\t%if &_method = PUT or &_method = POST %then %do;\n\t\t\tpayload= &payload;  /* &payload can either be the generated or the original payload */\n\n\t\t\tcall symput(\"exe_payload\", trim(payload));\n\t\t%end;\n\n\t\t/* execute macro */\n\t\texecuteHTTP= cats('%executeHTTP(', rowNum, ')');\n\t\tcall execute(executeHTTP); /* %executeHTTP() */\n\n\t\tif _last_ then\n\t\t\tcall symput(\"rowCnt\", _n_); /* need to know how many rows we processed */\n\trun;\n%mend callRequestForInputTable;\n\n\n/* ----------------------------------------------------------------------- */\n/* merge the columns from the input table with the columns from            */\n/* the http result row by row                                              */\n/* ----------------------------------------------------------------------- */\n%macro mergeInOut();\n\tdata &_outputtable;\n\t  if (eof1 and eof2) then stop;\n\t  if not eof1 then set &_inputtable end=eof1 ;\n\t  if not eof2 then set &_outputtable end=eof2 ;\n\t  output;\n\t  call missing(of _all_);\n\trun;\n%mend mergeInOut;\n\n\n/* ----------------------------------------------------------------------- */\n/* Map the HTTP result to coulmns in a table according to the field mapping*/ \n/* from UI &_fieldMapping.                                                 */\n/* ----------------------------------------------------------------------- */\n%macro mapHeaderToken(mapline);\n\tfilename PCODE TEMP;\n\tdata _null_;\n\t\tfile PCODE;\n\t\tput\"SAS.symput('mapKeyError_','No')\";\n\t\tput\"SAS.symput('mapKeyErrorMsg_', '')\";\n\t\tput\"SAS.symput('mapKeyErrorMsg2_', '')\";\n\t\tput\"mapToken= True\";\n\t\tput\" \";\n\t\tput\"mapline= int(SAS.symget('mapline'))\";\n\t\tput\"headerMappingIn= str(SAS.symget(f'_headerMapping_{mapline}'))\";\n\t\tput\"tagCaseSensetive= int(SAS.symget('_tagCaseSensetive'))\";\n\t\tput\"headerMapping= headerMappingIn.split(':')\";\n\t\tput\" \";\n\t\tput\"tagCaseSensetive= 0\";\n\t\tput\"tag= headerMapping[0].strip()\";\n\t\tput\"try:\";\n\t\tput\"    macro= headerMapping[1].strip()\";\n\t\tput\"except:\";\n\t\tput\"    print(f\"\"Error in header mapping line {mapline+1}: >\"\" +SAS.symget(f'_headerMapping_{mapline}') +\"\"<\"\")\";\n\t\tput\"    print('Check that tag and macro are mapped correctly.')\";\n\t\tput\"    SAS.symput('mapKeyError_','E')\";\n\t\tput\"    SAS.symput('mapKeyErrorMsg_', f\"\"Error in header mapping line {mapline+1}: >\"\" +SAS.symget(f'_headerMapping_{mapline}') +\"\"<\"\")\";\n\t\tput\"    SAS.symput('mapKeyErrorMsg2_', 'Check that tag and macro are mapped correctly.')\";\n\t\tput\"    mapToken= False\";\n\t\tput\" \";\n\t\tput\"#only continue if the token - macro mapping is ok\";\n\t\tput\"if mapToken:\";\n\t\tput\"    value= ''\";\n\t\tput\"    #read the header info file\";\n\t\tput\"    with open('/tmp/hdinfo.txt', 'r') as header:\";\n\t\tput\"        lines= header.readlines()\";\n\t\tput \" \";\n\t\tput\"    #go through the file and find the tag.\";\n\t\tput\"    for line in lines:\";\n\t\tput\"        line= line.strip()\";\n\t\tput\"        if tagCaseSensetive:\";\n\t\tput\"            if tag == line[0:len(tag)]:\";\n\t\tput\"                value= line[len(tag)+1:].strip()\";\n\t\tput\"        else:\";\n\t\tput\"            if tag.lower() == line[0:len(tag)].lower():\";\n\t\tput\"                value= line[len(tag)+1:].strip()\";\n\t\tput\" \";\n\t\tput\"    #if tag was found map value to SAS macro\";\n\t\tput\"    if len(value) > 0:\";\n\t\tput\"        SAS.symput('macroName', macro)\";\n\t\tput\"        SAS.symput('macroValue', value)\";\n\t\tput\"    else:\";\n\t\tput\"        print(f'Warning: Could not find tag >{tag}< in header mapping line {mapline+1}')\";\n\t\tput\"        SAS.symput('mapKeyError_','W')\";\n\t\tput\"        SAS.symput('mapKeyErrorMsg_', f'Could not find tag >{tag}< in header mapping line {mapline+1}')\";\n\t\tput\"        SAS.symput('mapKeyErrorMsg2_', 'Make sure tag does exist.')\";\t\n\trun;\n\t\n\tproc python infile= PCODE; quit;\n\n\t/* only if we reveived a value we can make it global */\t\n\t%if &mapKeyError_ = %then %do;\n\t\t/* output token and value to the log */\n\t\t%put &macroName => &macroValue;\n\t\t%global &macroName; \n\t\t%let &macroName= &macroValue;\n\t%end;\n\n\t%global mapKeyError mapKeyErrorMsg mapKeyErrorMsg2;\n\t%let mapKeyError= &mapKeyError_;\n\t%let mapKeyErrorMsg= &mapKeyErrorMsg_;\n\t%let mapKeyErrorMsg2= &mapKeyErrorMsg2_;\n%mend mapHeaderToken;\n\n\n/* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ */\n/* MAIN                                                                    */\n/* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ */\n%macro main();\n\t\t/* Check output folder if set to \"sasserver\" - if it was set in the UI*/\n\t%if &_http_output_dir ~= %then %do;\n\t\t%let outputFolder= %substr(&_http_output_dir, 11);\n\t\t%let folderserver= %substr(&_http_output_dir, 1, 9);\n\t\tdata _null_;\n\t\t\tfile print;\t\n\t\t\tfolderserver= \"&folderserver\";\n\t\t\tif folderserver ~= \"sasserver\" then do;\n\t\t\t\tput \"ERROR: Wrong output folder!\";\n\t\t\t\tput \"Please select a folder from sasserver not from sascontent.\";\n\t\t\t\terror \"ERROR: Wrong output folder! The folder needs to be on sasserver!\";\n\t\t\t\tabort;\n\t\t\tend;\n\t\trun;\n\t%end;\n\t%else %do;\n\t\t%let outputFolder= /tmp; /* default location for the http output files */\n\t%end;\n\n\t/* set the output name for the json file if it is not set in the UI */\n\t%if &_outputName = %then %do;\n\t\t%let _outputName= httpoutAll;\n\t%end;\n\n\t/* if _outputtable exists and has no value set to default value */\n\t%if %symexist(_outputtable) %then %do;\n\t\t%if &_outputtable = %then %do;\n\t\t\t%let _outputtable= _HTTP_RESULT; /* default value */\n\t\t%end;\n\t%end;\n\t%else %do;\n\t\t%let _outputtable= _HTTP_RESULT; /* default value */\n\t%end;\n\n\t/* if we use an internal API, we have to generate the appropriate URL */\t\n\t%if &_authtype = SAS Internal Viya API %then %do;\n\t\t%generateInternalUrl();\n\t%end;\n\n\t/* prepare url for execution. We need to replace parameters with values is there are parameters in the url */\n\t%setParamaters(&_URL); /* build the dynamic url */\n\t%let url= &parsedString;\n\n\t%if &_method = PUT or &_method = POST %then %do;\n\t\t%let payload= ;\n\t\t/* if there is a payload prepare it for execution. We need to replace parameters with values is there are parameters in the payload */\n\t\t%if &_payload ~= %then %do;\n\t\t\t%setParamaters(&_payload); /* build the dynamic payload. Replace parameters in payload with values*/\n\t\t\t%let payload= &parsedString;\n\t\t%end;\n\t%end;\n\n\t/* if input table variable does exist */\n\t%let isInputTable= No; /* indecate there is no input table */\n\t%if %symexist(_inputtable) %then %do;\n\t\t%if &_inputtable ~= %then %do; /* if there is data coming from an input table */\n\t\t\t%let isInputTable= Yes;\n\t\t\t%callRequestForInputTable(); /* call the http request for each row in the input table */\n\t\t%end;\n\t%end;\n\n\t/* if there is NO input table */\n\t%if &isInputTable = No %then %do;\n\t\t%let rowCnt= 1; /* need to set row count to 1 */\n\t\tdata _null_;\n\t\t\turl= &url; /* &url can either be the generated or the original url. */\n\t\t\tcall symput(\"exe_url\", cats(\"'\", trim(url), \"'\"));\n\n\t\t\t%if &_method = PUT or &_method = POST %then %do;\n\t\t\t\tpayload= &payload;  /* &payload can either be the generated or the original payload */\n\t\t\t\tcall symput(\"exe_payload\", cats('%nrstr(', trim(payload), ')'));\n\t\t\t%end;\n\t\trun;\t\n\t\t%executeHTTP(1);\n\t%end;\n\n\t%combineHTTPOutput(); /* put all json output (from each row in the input table) into one file */\n\n\t%outputToLibrary(); /* output http result to SAS lib */\n\n\t/* if &_fieldMapping in the UI has any input data we map the http result to output columns */\n\t%if &_fieldMapping ~= %then %do;\n\t\t%mapHTTPToColumns(); /* map http result */\n\t\t/* if anything went wrong with the mapping we raise an error */\n\t\t%checkError();\n\t\t/* if set in the ui create macros for the mapped output columns */\n\t\t%if &_outputToMacro = 1 %then %do;\n\t\t\t%mapMacros();\n\t\t%end;\n\t%end;\n\n\t/* if set in the ui add the http result to the input table */\n\t%if &_mergeInOut = 1 %then %do;\n\t\t%mergeInOut();\n\t%end;\n\n\t/* read header output information and map to macros if required in the ui */\n\t%let i= 0;\n\t%do %while(&i < &_headerMappingCnt);\n\t\t%mapHeaderToken(&i);\n\t\t%checkError();\n\t\t%let i= %eval(&i+ 1);\n\t%end;\n\n%mend main;\n%main();\n\n/* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ */\n/* CLEAN UP                                                                */\n/* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ */\n/* ----------------------------------------------------------------------- */\n/* clean up macros variables used in this step                             */\n/* ----------------------------------------------------------------------- */\n%if %symexist(url) %then %do;\n\t%symdel url;\n%end;\n%if %symexist(rowCnt) %then %do;\n\t%symdel rowCnt;\n%end;\n%if %symexist(exe_url) %then %do;\n\t%symdel exe_url;\n%end;\n%if %symexist(outputFolder) %then %do;\n\t%symdel outputFolder;\n%end;\n%if %symexist(folderserver) %then %do;\n\t%symdel folderserver;\n%end;\n%if %symexist(mapKeyError) %then %do;\n\t%symdel mapKeyError;\n%end;\n%if %symexist(mapKeyErrorMsg) %then %do;\n\t%symdel mapKeyErrorMsg;\n%end;\n%if %symexist(mapKeyErrorMsg2) %then %do;\n\t%symdel mapKeyErrorMsg2;\n%end;\n%if %symexist(parsedString) %then %do;\n\t%symdel parsedString;\n%end;\n%if %symexist(payload) %then %do;\n\t%symdel payload;\n%end;\n%if %symexist(exe_payload) %then %do;\n\t%symdel exe_payload;\n%end;\n%if %symexist(isInputTable) %then %do;\n\t%symdel isInputTable;\n%end;\n\n/* ----------------------------------------------------------------------- */\n/* clean up macros used in this step                                       */\n/* ----------------------------------------------------------------------- */\n%sysmacdelete main;\n%sysmacdelete setParamaters; \n%sysmacdelete callRequestForInputTable; \n%sysmacdelete executeHTTP; \n%sysmacdelete combineHTTPOutput;\n%sysmacdelete mergeInOut;\n%sysmacdelete mapHeaderToken;\n%sysmacdelete checkError;\n%sysmacdelete outputToLibrary;\n%sysmacdelete mapHTTPToColumns;\n%sysmacdelete generateInternalUrl;\n%sysmacdelete checkHTTPStatus;\n%sysmacdelete mapMacros;"}}