{"creationTimeStamp":"2023-02-09T14:59:02.801Z","modifiedTimeStamp":"2023-02-09T15:00:15.473Z","createdBy":"sinsrn","modifiedBy":"sinsrn","name":"CAS - Generate Unique ID.step","displayName":"CAS - Generate Unique ID.step","localDisplayName":"CAS - Generate Unique ID.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","uri":"/dataFlows/steps/dd71fb3c-bda8-4bb5-9dff-edf03bbf50ad","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":1,"maxEntries":1,"type":"table"}],"outputPorts":[{"name":"casout","displayName":"casout","localDisplayName":"casout","minEntries":1,"maxEntries":1,"type":"table","columnDelta":{"updateColumnArguments":["uid"],"automaticMapping":[{"inputPort":"inputtable1","inputPortName":"inputtable1"}]},"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"parameters\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Parameters\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text3\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"CAS - Generate Unique ID\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"uid\",\n\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\"label\": \"Provide Unique ID name:\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Note: By default, all input table columns (plus the unique ID) get copied over to the output table.  Refer the CAS action documentation (About tab) for details on the copyVars option in case you wish to specify variables to copy.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"casout\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"CAS - Generate Unique ID\\n\\nThis custom step generates a new column containing a unique identifier (ID) per observation for a given input CAS table.\\n\\nSince Cloud Analytics Services (CAS) processes across multiple threads, the conventional method of using the _n_  automatic variable (as used in SAS Compute) does not ensure uniqueness.  \\n\\nThere exists both a workaround ( concatenating the thread id with the _n_ variable) and a CAS action (included in all Viya offerings) to create a unique ID column.  This custom step makes use of the CAS action (textmanagement.generateIds) to generate a unique ID.\\n\\nParameters:\\n\\nNote that this action requires an active CAS connection in order to run successfully.  Ensure you are connected to CAS before running this step.\\n\\n1. Input port: connect an input CAS table to the input port.\\n\\n2. Name desired for the unique ID column.\\n\\nNote that all columns are copied over to the output table.\\n\\n3. Output port: connect an output table (which needs to be a CAS table) to the output port.\\n\\nDocumentation:\\n\\n1. textmanagement.generateIds CAS action : https://go.documentation.sas.com/doc/en/pgmsascdc/default/casvtapg/n0qdvvymlj69d7n18dfvh6ipjn2k.htm#p1rs825m6ue07wn1tusdtru2vrc5\\n2. This SAS Communities article provides the workaround mentioned earlier: https://communities.sas.com/t5/SAS-Communities-Library/Creating-a-unique-ID-with-CAS-DATA-Step/ta-p/644592\\n\\nCreated / contact : \\n\\n- Sundaresh Sankaran (sundaresh.sankaran@sas.com)\\n\\nVersion : 1.1.   (07FEB2023)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"uid\": {\n\t\t\t\"value\": \"Unique_ID\",\n\t\t\t\"label\": \"Unique ID\",\n\t\t\t\"type\": \"n\"\n\t\t},\n\t\t\"casout\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"/* SAS templated code goes here */\n\n/* A common use-case is that the analytics developer desires all variables to be copied over to the output table.   */\n/* A trait of the CAS action (textmanagement.generateIds) used below is to automatically copy all variables, if NO variables are selected in the copyVars option. */\n/* This current version of the custom step does not specify the copyVars option, therefore implying that all columns get copied over.  Users may edit this custom step to include the copyVars option if they desire. */\n\n%put \"Blank list provided. All Columns will be copied.\";\n\n\n/* Call the CAS action contained within the Text Management action set (which is available within all Viya offerings) */\nproc cas;\n   textManagement.generateIds /                            \n      casOut={name=\"&casout_name_base.\", caslib=\"&casout_lib.\", replace=TRUE }\n      id=\"&uid_name_base.\"\n      table={name=\"&inputtable1_name_base.\", caslib=\"&inputtable1_lib.\"}\n      ;\n\nquit;"}}