{"creationTimeStamp":"2021-12-16T09:28:45.741Z","modifiedTimeStamp":"2021-12-16T09:31:22.438Z","createdBy":"italot","modifiedBy":"italot","name":"DQ - Clustering.step","displayName":"DQ - Clustering.step","localDisplayName":"DQ - Clustering.step","description":"PROC DQMATCH:\nCreate match-codes as a basis for standardization or transformation.\n","localDescription":"PROC DQMATCH:\nCreate match-codes as a basis for standardization or transformation.\n","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inTable","displayName":"inTable","localDisplayName":"inTable","minEntries":1,"maxEntries":1,"type":"table"}],"outputPorts":[{"name":"outTable","displayName":"outTable","localDisplayName":"outTable","minEntries":1,"maxEntries":1,"type":"table","requiresStructure":false}]},"ui":"{\"pages\":[{\"id\":\"entityRes\",\"type\":\"page\",\"label\":\"Match and Cluster\",\"children\":[{\"id\":\"inTable\",\"type\":\"inputtable\",\"label\":\"Select an input table:\",\"required\":true},{\"id\":\"clusterName\",\"type\":\"textfield\",\"label\":\"New column name:\",\"required\":true},{\"id\":\"cluster_text\",\"type\":\"text\",\"text\":\"Cluster records based on following rule(s).\"},{\"id\":\"rule1\",\"type\":\"columnselector\",\"label\":\"Rule 1 columns:\",\"table\":\"inTable\",\"order\":true,\"max\":0,\"min\":1},{\"id\":\"addRule2\",\"type\":\"checkbox\",\"label\":\"Add Rule 2\"},{\"id\":\"rule2\",\"type\":\"columnselector\",\"label\":\"Rule 2 columns:\",\"table\":\"inTable\",\"order\":true,\"max\":0,\"min\":1,\"visible\":\"$addRule2\"},{\"id\":\"addRule3\",\"type\":\"checkbox\",\"label\":\"Add Rule 3\"},{\"id\":\"rule3\",\"type\":\"columnselector\",\"label\":\"Rule 3 columns:\",\"table\":\"inTable\",\"order\":true,\"max\":0,\"min\":1,\"visible\":\"$addRule3\"},{\"id\":\"outTable\",\"type\":\"outputtable\",\"label\":\"Specify the output table:\",\"required\":true}]},{\"id\":\"matchOptions\",\"type\":\"page\",\"label\":\"Options\",\"children\":[{\"id\":\"clusonly\",\"type\":\"checkbox\",\"label\":\"Excludes input character values that are not part of a cluster.\"},{\"id\":\"blanks1\",\"type\":\"dropdown\",\"label\":\"Specifies how to process blank values\",\"items\":[{\"value\":\"CLUSTER_BLANKS\",\"label\":\"Specifies that blank values are written to the output data set\"},{\"value\":\"NO_CLUSTER_BLANKS\",\"label\":\"Specifies that blank values are not written to the output data set\"}],\"required\":true,\"placeholder\":\"\",\"visible\":\"\"}]}],\"values\":{\"clusterName\":\"Cluster_ID\",\"blanks1\":{\"value\":\"CLUSTER_BLANKS\",\"label\":\"Specifies that blank values are written to the output data set\"}},\"syntaxversion\":\"1.3.0\"}","templates":{"SAS":"/* SAS templated code goes here */\n%macro usr_dqmatch() ;\n\n\tproc dqmatch data=&intable \n\t\tout=&outtable\n\t\tcluster=&clusterName\n\t\t\n\t\t&blanks1\n\t\t%if &clusonly=1 %then %do ;\n\t\t\tCLUSTERS_ONLY\n\t\t%end ;\n\t\t;                                                                                                               \n\n\t\t%let con=1 ;\n\n\t\t%do con=1 %to 3 ;\n\t\t\t%do i = 1 %to &&rule&con._count;\n\t\t\t\tcriteria condition=&con var=&&rule&con._&i._name exact;   \n\t\t\t%end;\n\t\t%end ;\n\trun;\n\n%mend ;\n%usr_dqmatch() ;\n"}}