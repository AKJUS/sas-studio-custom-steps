{"creationTimeStamp":"2023-07-11T17:49:51.192Z","modifiedTimeStamp":"2023-07-11T18:52:36.474Z","createdBy":"Sundaresh.Sankaran@sas.com","modifiedBy":"Sundaresh.Sankaran@sas.com","name":"CAS - Validate Unique ID.step","displayName":"CAS - Validate Unique ID.step","localDisplayName":"CAS - Validate Unique ID.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","uri":"/dataFlows/steps/c226954e-ca41-457b-b495-33ac6f4bf7a9","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable","displayName":"inputtable","localDisplayName":"inputtable","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"validationtable","displayName":"validationtable","localDisplayName":"validationtable","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"parameters\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Parameters\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input table:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"docId\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Select unique ID candidate: \",\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\"table\": \"inputtable\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"validationtable\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Validation table:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"CAS - Validate Unique ID\\n\\nThis custom step validates if a specified unique ID candidate column for a SAS Cloud Analytics Services (CAS) table is indeed unique. \\n\\nYou may like to use this in tandem with the CAS - Generate Unique ID custom step.  For example, if this step indicates that a candidate ID is not unique, make use of CAS - Generate Unique ID to generate a new identifier.\\n\\nThis custom step makes use of the CAS action (textmanagement.validateIds).\\n\\n\\nParameters:\\n\\nNote that this action requires an active CAS connection to run successfully.  Ensure you are connected to CAS before running this step.\\n\\n1. Input port: connect an input CAS table to the input port.\\n\\n2. Select a desired column from the input table for validation as a candidate unique ID.\\n\\n3. Output port: connect an output table (which needs to be a CAS table) to the output port.  This is called the validation table and will contain information on any duplicate occurrences of the candidate input ID.\\n\\n\\nDocumentation:\\n\\n- The textmanagement.validateIds CAS action: https://go.documentation.sas.com/doc/en/pgmsascdc/default/casvtapg/cas-textmanagement-validateids.htm\\n\\n\\nCreated / contact: Sundaresh Sankaran (sundaresh.sankaran@sas.com)\\n\\n\\nVersion: 1.0.   (11JUL2023)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputtable\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"docId\": [],\n\t\t\"validationtable\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"/* SAS templated code goes here */\n\n/*-----------------------------------------------------------------------------------------*\n   Macro definition\n*------------------------------------------------------------------------------------------*/\n\n/*-----------------------------------------------------------------------------------------*\n   This macro creates a global macro variable called _usr_nameCaslib\n   that contains the caslib name (aka. caslib-reference-name) associated with the libname \n   and assumes that the libname is using the CAS engine.\n\n   As sysvalue has a length of 1024 chars, we use the trimmed option in proc sql\n   to remove leading and trailing blanks in the caslib name.\n*------------------------------------------------------------------------------------------*/\n\n%macro _usr_getNameCaslib(_usr_LibrefUsingCasEngine); \n\n   %global _usr_nameCaslib;\n   %let _usr_nameCaslib=;\n\n   proc sql noprint;\n      select sysvalue into :_usr_nameCaslib trimmed from dictionary.libnames\n      where libname = upcase(\"&_usr_LibrefUsingCasEngine.\") and upcase(sysname)=\"CASLIB\";\n   quit;\n\n%mend _usr_getNameCaslib;\n\n\n/*-----------------------------------------------------------------------------------------*\n   Execution code\n*------------------------------------------------------------------------------------------*/\n\n/*-----------------------------------------------------------------------------------------*\n   Run caslib check macro to obtain the name of the caslib, given the libname using CAS engine.\n*------------------------------------------------------------------------------------------*/\n\n%_usr_getNameCaslib(&inputtable_lib.);\n%let inputTableLib=&_usr_nameCaslib.;\n\n%_usr_getNameCaslib(&validationtable_lib.);\n%let validationTableLib=&_usr_nameCaslib.;\n\n\n/*-----------------------------------------------------------------------------------------*\n   Run CAS procedure\n*------------------------------------------------------------------------------------------*/\n\nproc cas;\n\n/*-----------------------------------------------------------------------------------------*\n   Obtain values from the UI\n*------------------------------------------------------------------------------------------*/\n\n   inputTable=symget(\"inputtable_name_base\");\n   inputTableLib=symget(\"inputTableLib\");\n   docId=symget(\"docId_1_name_base\");\n   validationTable=symget(\"validationtable_name_base\");\n   validationTableLib=symget(\"validationTableLib\");\n\n\n/*-----------------------------------------------------------------------------------------*\n   Run CAS action to validate the specified user id\n*------------------------------------------------------------------------------------------*/\n\n   textManagement.validateIds /\n      table={name=inputTable, caslib=inputTableLib}\n      id=docId\n      casout={name=validationTable, caslib=validationTableLib, replace=True}\n;\n\nquit;\n\n"}}