{"type":"code","name":"Register.step","displayName":"Register.step","description":"","templates":{"SAS":"/* SAS templated code goes here */\n%let projectVer=%sysfunc(ifc(&newVersion.,new,));\n%let target=%sysfunc(ifc(%symexist(targetVar_1_name),%nrstr(&targetVar_1_name.),));\n%let eventProb=%sysfunc(ifc(%symexist(eventProbVar_1_name),%nrstr(&eventProbVar_1_name.),));\n%let nonEventProb= %sysfunc(ifc(%symexist(nonEvenProbVar_1_name),%nrstr(&nonEvenProbVar_1_name.),));\n%let cutStep=%sysevalf(1 / &cutoff.);\n%let testSamplePct= %sysfunc(ifc(&useTestPart.,&testSamplePct.,0));\n%let scoreOutput=%sysfunc(ifc(%symexist(scoredTable),%nrstr(&scoredTable.),));\n\n%mm_get_project_id(\n    projectNm=&projectName., \n    projectLoc=&projectLoc., \n\tidvar=myProjID\n);\n\n%mm_import_astore_model(\n    rstore=&astore.,\n    locationID=%str(&myprojID), \n    modelname=&modelName., \n\tmodeldesc=&modelDesc., \n    projectVersion=&projectVer., \n\tscoredata=&scoreOutput., \n    nBins=&numbins. , \n    cutStep=&cutStep., \n    maxIters=&maxIter. , \n\ttarget=&target., \n    event=&targetEvent., \n    targetLevel=&targetLevel., \n    eventProbVar=&eventProb., \n\tnonEventProbVar=&nonEventProb., \n    nonEvent=&nonTargetEvent., \n    samplePct=&trainSamplePct., \n    samplePct2=&testSamplePct., \n\tsampleSeed=&sampleSeed. \n);\n\nproc delete data=work.__ITEMS; run;\nproc delete data=work._NLITERAL_; run;\nproc delete data=work._AUXTABLE_; run;\n"},"properties":{},"ui":"{\"showPageContentOnly\":true,\"pages\":[{\"id\":\"register\",\"type\":\"page\",\"label\":\"Register\",\"children\":[{\"id\":\"model\",\"type\":\"section\",\"label\":\"Model\",\"open\":true,\"visible\":\"\",\"children\":[{\"id\":\"astore\",\"type\":\"inputtable\",\"label\":\"Specify a CAS table that contains an analytic store.\",\"required\":true,\"placeholder\":\"\",\"visible\":\"\"},{\"id\":\"modelName\",\"type\":\"textarea\",\"label\":\"Name\",\"placeholder\":\"\",\"required\":true,\"visible\":\"$astore\"},{\"id\":\"modelDesc\",\"type\":\"textarea\",\"label\":\"Description\",\"placeholder\":\"\",\"required\":false,\"visible\":\"\"}]},{\"id\":\"project\",\"type\":\"section\",\"label\":\"SAS Model Manager\",\"open\":true,\"visible\":\"\",\"children\":[{\"id\":\"projectName\",\"type\":\"textarea\",\"label\":\"Project name\",\"placeholder\":\"\",\"required\":true,\"visible\":\"\"},{\"id\":\"projectLoc\",\"type\":\"textarea\",\"label\":\"Project location\",\"placeholder\":\"\",\"required\":false,\"visible\":\"\"},{\"id\":\"newVersion\",\"type\":\"checkbox\",\"label\":\"New project version\",\"visible\":\"$projectName\"}]}]},{\"id\":\"data\",\"type\":\"page\",\"label\":\"Data\",\"children\":[{\"id\":\"dataSec\",\"type\":\"section\",\"label\":\"Data\",\"open\":false,\"visible\":true,\"children\":[{\"id\":\"scoredTable\",\"type\":\"inputtable\",\"label\":\"Specify scored CAS table:\",\"required\":false,\"placeholder\":\"\",\"visible\":true}]},{\"id\":\"roleSec\",\"type\":\"section\",\"label\":\"Roles\",\"open\":false,\"visible\":\"$scoredTable\",\"children\":[{\"id\":\"targetLevel\",\"type\":\"radiogroup\",\"label\":\"\",\"items\":[{\"value\":\"binary\",\"label\":\"Use a binary target\"}],\"visible\":\"$scoredTable\"},{\"id\":\"targetVar\",\"type\":\"columnselector\",\"label\":\"Target:\",\"order\":false,\"columntype\":\"a\",\"max\":1,\"min\":1,\"visible\":\"$scoredTable\",\"table\":\"scoredTable\"},{\"id\":\"targetEvent\",\"type\":\"dropdown\",\"label\":\"Event level of target:\",\"items\":{\"ref\":\"targetVar\"},\"required\":false,\"placeholder\":\"\",\"visible\":\"$targetVar\"},{\"id\":\"eventProbVar\",\"type\":\"columnselector\",\"label\":\"Posterior probability of target event:\",\"order\":false,\"columntype\":\"n\",\"max\":1,\"min\":1,\"visible\":\"$scoredTable\",\"table\":\"scoredTable\"}]},{\"id\":\"partitionSec\",\"type\":\"section\",\"label\":\"Partitions\",\"open\":false,\"visible\":\"$scoredTable\",\"children\":[{\"id\":\"useTrainPart\",\"type\":\"checkbox\",\"label\":\"Training partition\",\"visible\":\"\"},{\"id\":\"trainSamplePct\",\"type\":\"textfield\",\"label\":\"Sampling percentage for the training partition:\",\"regexp\":\"^(100|[1-9][0-9]?)$\",\"placeholder\":\"\",\"required\":false,\"visible\":\"$useTrainPart\"},{\"id\":\"useTestPart\",\"type\":\"checkbox\",\"label\":\"Test partition\",\"visible\":\"\"},{\"id\":\"testSamplePct\",\"type\":\"textfield\",\"label\":\"Sampling percentage for the test partition:\",\"regexp\":\"^(100|[1-9][0-9]?)$\",\"placeholder\":\"40\",\"required\":false,\"visible\":\"$useTestPart\"},{\"id\":\"testPartNote\",\"type\":\"text\",\"text\":\"Note: The test partition consists of unsampled cases.\",\"visible\":\"$useTrainPart\"},{\"id\":\"sampleSeed\",\"type\":\"numberfield\",\"label\":\"Random seed:\",\"placeholder\":\"\",\"required\":false,\"max\":null,\"min\":null,\"visible\":\"\"},{\"id\":\"seedNote\",\"type\":\"text\",\"text\":\"Note: Specifying a value for the random seed might not replicate results in a distributed computing environment.\",\"visible\":\"\"}]}]},{\"id\":\"option\",\"type\":\"page\",\"label\":\"Options\",\"children\":[{\"id\":\"liftSec\",\"type\":\"section\",\"label\":\"Lift Analysis\",\"open\":true,\"visible\":\"$scoredTable\",\"children\":[{\"id\":\"numbins\",\"type\":\"dropdown\",\"label\":\"Lift curve type:\",\"items\":[{\"value\":\"20\",\"label\":\"Semi-decile\"},{\"value\":\"10\",\"label\":\"Decile\"}],\"required\":false,\"placeholder\":\"\",\"visible\":\"\"},{\"id\":\"maxIter\",\"type\":\"numberfield\",\"label\":\"Maximum number of iterations:\",\"placeholder\":\"\",\"required\":false,\"max\":null,\"min\":0,\"excludemin\":true,\"visible\":\"\"}]},{\"id\":\"rocSec\",\"type\":\"section\",\"label\":\"ROC Analysis\",\"open\":true,\"visible\":\"$scoredTable\",\"children\":[{\"id\":\"cutoff\",\"type\":\"numstepper\",\"label\":\"Increase cutoff probability from 0 to 1 by:\",\"required\":false,\"integer\":false,\"min\":0.01,\"max\":0.2,\"stepsize\":0.01}]},{\"id\":\"fitstatSec\",\"type\":\"section\",\"label\":\"Fit Statistics\",\"open\":true,\"visible\":\"$scoredTable\",\"children\":[{\"id\":\"nonEvenProbVar\",\"type\":\"columnselector\",\"label\":\"Posterior probability of target non-event:\",\"order\":false,\"columntype\":\"n\",\"max\":1,\"min\":1,\"visible\":\"\",\"table\":\"scoredTable\"},{\"id\":\"nonTargetEvent\",\"type\":\"dropdown\",\"label\":\"Non-event level of target:\",\"items\":{\"ref\":\"targetVar\"},\"required\":false,\"placeholder\":\"\",\"visible\":\"$nonEvenProbVar\"}]}]},{\"id\":\"about\",\"type\":\"page\",\"label\":\"About\",\"children\":[{\"id\":\"aboutNote\",\"type\":\"text\",\"text\":\"Register\\n\\nRegister an analytical model with SAS Model Manager.\\n\\nThe related public macros are documented here:\\nhttps://go.documentation.sas.com/doc/en/mdlmgrcdc/v_028/mdlmgrmacro/p0afa8wptbbkr6n1vtwax8nbifm4.htm\\n\\nCreated / contact: Jacky (Kun) Jia (kun.jia@sas.com)\\n\\nVersion : 1.0.   (26DEC2022)\",\"visible\":\"\"}]}],\"values\":{\"astore\":{\"library\":\"\",\"table\":\"\"},\"modelName\":\"Model 1\",\"modelDesc\":\"model register from custom step\",\"projectName\":\"\",\"projectLoc\":\"Public\",\"newVersion\":false,\"scoredTable\":{\"library\":\"\",\"table\":\"\"},\"targetLevel\":{\"value\":\"binary\",\"label\":\"Use a binary target\"},\"targetVar\":[],\"targetEvent\":{\"value\":\"1\"},\"eventProbVar\":[],\"useTrainPart\":true,\"trainSamplePct\":\"30\",\"useTestPart\":false,\"testSamplePct\":\"\",\"sampleSeed\":1234,\"numbins\":{\"value\":\"20\",\"label\":\"Semi-decile\"},\"maxIter\":50,\"cutoff\":0.05,\"nonEvenProbVar\":[],\"nonTargetEvent\":{\"value\":\"0\"}},\"syntaxversion\":\"1.3.0\"}","flowMetadata":{"inputPorts":[{"name":"astore","displayName":"astore","minEntries":1,"maxEntries":1,"type":"table"},{"name":"scoredTable","displayName":"scoredTable","minEntries":0,"maxEntries":1,"type":"table"}],"outputPorts":[]}}