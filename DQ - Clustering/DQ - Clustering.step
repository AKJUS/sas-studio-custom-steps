{"creationTimeStamp":"2022-07-11T08:04:08.537Z","modifiedTimeStamp":"2022-09-21T14:16:20.458Z","createdBy":"italot","modifiedBy":"italot","name":"DQ - Clustering.step","displayName":"DQ - Clustering.step","localDisplayName":"DQ - Clustering.step","description":"PROC DQMATCH:\nCreate match-codes as a basis for standardization or transformation.\n","localDescription":"PROC DQMATCH:\nCreate match-codes as a basis for standardization or transformation.\n","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","uri":"/dataFlows/steps/f294aa39-e451-41c9-9baf-441c78c17aa2","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inTable","displayName":"inTable","localDisplayName":"inTable","minEntries":1,"maxEntries":1,"type":"table"}],"outputPorts":[{"name":"outTable","displayName":"outTable","localDisplayName":"outTable","minEntries":1,"maxEntries":1,"type":"table","columnDelta":{"updateColumnArguments":["clusterName"],"automaticMapping":[{"inputPort":"inTable","inputPortName":"inTable"}]},"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"entityRes\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Match and Cluster\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inTable\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Select an input table:\",\n\t\t\t\t\t\"required\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outTable\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Specify the output table:\",\n\t\t\t\t\t\"required\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"clusterName\",\n\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\"label\": \"New column name\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"Cluster_ID\",\n\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"cluster_text\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Cluster records based on following rule(s).\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"rule1\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Rule 1 columns:\",\n\t\t\t\t\t\"table\": \"inTable\",\n\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\"max\": 0,\n\t\t\t\t\t\"min\": 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"addRule2\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Add Rule 2\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"rule2\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Rule 2 columns:\",\n\t\t\t\t\t\"table\": \"inTable\",\n\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\"max\": 0,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": \"$addRule2\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"addRule3\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Add Rule 3\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"rule3\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Rule 3 columns:\",\n\t\t\t\t\t\"table\": \"inTable\",\n\t\t\t\t\t\"order\": true,\n\t\t\t\t\t\"max\": 0,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": \"$addRule3\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"matchOptions\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"clusonly\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Excludes input character values that are not part of a cluster.\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"blanks1\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Specifies how to process blank values\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"CLUSTER_BLANKS\",\n\t\t\t\t\t\t\t\"label\": \"Specifies that blank values are written to the output data set\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"NO_CLUSTER_BLANKS\",\n\t\t\t\t\t\t\t\"label\": \"Specifies that blank values are not written to the output data set\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The DQ - Clustering step allows you to create a cluster match code based on defined rules; each rule can contain one or more columns. This version supports up to three rules.\\n\\nVersion 1.0 (14SEP2022)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"clusterName\": {\n\t\t\t\"type\": \"n\",\n\t\t\t\"value\": \"Cluster_ID\",\n\t\t\t\"label\": \"Cluster_ID\"\n\t\t},\n\t\t\"blanks1\": {\n\t\t\t\"value\": \"CLUSTER_BLANKS\",\n\t\t\t\"label\": \"Specifies that blank values are written to the output data set\"\n\t\t}\n\t}\n}","templates":{"SAS":"/* SAS templated code goes here */\n%macro usr_dqmatch() ;\n\n\tproc dqmatch data=&intable \n\t\tout=&outtable\n\t\tcluster=&clusterName_name\n\t\t\n\t\t&blanks1\n\t\t%if &clusonly=1 %then %do ;\n\t\t\tCLUSTERS_ONLY\n\t\t%end ;\n\t\t;                                                                                                               \n\n\t\t%let con=1 ;\n\n\t\t%do con=1 %to 3 ;\n\t\t\t%do i = 1 %to &&rule&con._count;\n\t\t\t\tcriteria condition=&con var=&&rule&con._&i._name exact;   \n\t\t\t%end;\n\t\t%end ;\n\trun;\n\n%mend ;\n%usr_dqmatch() ;\n"}}