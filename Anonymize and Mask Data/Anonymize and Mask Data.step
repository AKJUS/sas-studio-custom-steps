{"creationTimeStamp":"2023-06-20T13:39:41.512Z","modifiedTimeStamp":"2023-07-19T13:49:06.917Z","createdBy":"sasadm","modifiedBy":"sasadm","name":"Anonymize and Mask Data.step","displayName":"Anonymize and Mask Data.step","localDisplayName":"Anonymize and Mask Data.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","uri":"/dataFlows/steps/f67ea783-e64b-42af-9ac3-806019618bc2","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inTable","displayName":"inTable","localDisplayName":"inTable","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"inputQKBDef","displayName":"inputQKBDef","localDisplayName":"inputQKBDef","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"outTable","displayName":"outTable","localDisplayName":"outTable","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","columnDelta":{"removeColumnArguments":["inColumn"],"updateColumnArguments":["maskedColumn"],"automaticMapping":[{"inputPort":"inTable","inputPortName":"inTable"}]},"supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"maskData\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Anonymize and Mask Data\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inTable\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Select an input table:\",\n\t\t\t\t\t\"required\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputQKBDef\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Masking definitions table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"readonly\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"localeCol\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Locale column\",\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"columntype\": \"c\",\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"readonly\": true,\n\t\t\t\t\t\"table\": \"inputQKBDef\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"maskingDefCol\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Masking definition column\",\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"columntype\": \"c\",\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"readonly\": true,\n\t\t\t\t\t\"table\": \"inputQKBDef\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inColumn\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Select a column to mask:\",\n\t\t\t\t\t\"table\": \"inTable\",\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"selectedLocale\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Select a QKB locale:\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"ref\": \"localeCol\"\n\t\t\t\t\t},\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"(select a QKB locale)\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"selectedDefinition\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Select data masking definition:\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"ref\": \"maskingDefCol\"\n\t\t\t\t\t},\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"(Data masking definitions)\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"maskedColumn\",\n\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\"label\": \"Masked column name:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outTable\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Specify the output table:\",\n\t\t\t\t\t\"required\": true\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"aboutText\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The \\\"Anonymize and Mask Data\\\" step uses standardization definitions from the SAS Quality Knowledge Base (QKB) to mask or anonymize data in a selected column.  The selected column is dropped from the output and its masked version is returned instead.\\n\\nIt requires the SAS Quality Knowledge Base (QKB) for Contact Information version 32 (or later).  \\n\\nNote: This custom step is related to the \\\"DQ - Standardize\\\" custom step.  \\n \\n\\nVersion: 2.0 (27JUL2023)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputQKBDef\": {\n\t\t\t\"library\": \"SASDQREF\",\n\t\t\t\"table\": \"DM_MKDEF\"\n\t\t},\n\t\t\"localeCol\": [\n\t\t\t{\n\t\t\t\t\"value\": \"DM_DESC\"\n\t\t\t}\n\t\t],\n\t\t\"maskingDefCol\": [\n\t\t\t{\n\t\t\t\t\"value\": \"DM_NAME\"\n\t\t\t}\n\t\t],\n\t\t\"selectedLocale\": null,\n\t\t\"selectedDefinition\": null,\n\t\t\"maskedColumn\": {\n\t\t\t\"value\": \"maskedColumn\",\n\t\t\t\"label\": \"masked Column\"\n\t\t}\n\t},\n\t\"promptHierarchies\": [\n\t\t{\n\t\t\t\"name\": \"localeDefinition\",\n\t\t\t\"levels\": [\n\t\t\t\t\"selectedLocale\",\n\t\t\t\t\"selectedDefinition\"\n\t\t\t]\n\t\t}\n\t]\n}","templates":{"SAS":"/* Resolve selectedLocale to its 5-character QKBLocale */\nproc sql ;\n\tselect distinct DM_LOCALE into :QKBLocale\n\t\tfrom SASDQREF.DM_MKDEF\n\t\twhere DM_DESC=\"&selectedLocale\";\nrun ;\n%put &=QKBLocale.;\n\n\n\n/* Load Selected QKB Locale */\n%DQLOAD(DQLOCALE=(&QKBlocale));\n \n\n/* Apply Data Masking Standardization Definition */\ndata &outTable (drop=&incolumn_1_name); /* also specify the drop column in the output table metadata */\n\tset &inTable;\n    /* also specify the new column name in the output table metadata */\n\t&maskedColumn_name=dqStandardize(&inColumn_1_name,\"&selectedDefinition\", \"&QKBlocale\");\nrun;"}}