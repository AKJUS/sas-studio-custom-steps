{"creationTimeStamp":"2023-12-07T09:27:25.272Z","modifiedTimeStamp":"2023-12-21T14:11:53.449Z","createdBy":"itastu","modifiedBy":"itastu","name":"ShapeImport.step","displayName":"ShapeImport.step","localDisplayName":"ShapeImport.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","uri":"/dataFlows/steps/33d75086-9878-440a-bf83-7a1a7b2c3afb","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","localDisplayName":"outputtable1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"ShapeImport\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Shape Import\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"radiogroup2\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Has the ShapeInfo Custom Step been used?\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"Yes\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"No\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"fileorfolderselector1\",\n\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\"label\": \"Select the shape file import\",\n\t\t\t\t\t\"pathtype\": \"file\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$radiogroup2\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"No\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Label for the input table\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"columnselector1\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"Select the ID column\",\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$radiogroup2\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"Yes\"\n\t\t\t\t\t],\n\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\"table\": \"inputtable1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputfield1\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Name of the ID column\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$radiogroup2\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"No\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Label for the output table\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"radiogroup1\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Do you want to analize the shape to reduce its dimension?\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"Yes\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"No\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"About\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The \\\"ShapeImport\\\" Custom Step imports and analyzes a shape file (.shp).\\n\\nUSER INTERFACE\\n\\nIf the CS ShapeInfo has been used select \\\"Yes\\\" to speed up the import process. The input port has to be connected to the output table of the ShapeInfo CS.\\n\\nSelect the shape file import: select the file to import.\\n\\nSelect the ID column: if the custom step \\\"ShapeInfo\\\" has been used, this selector allow to choose the ID column from a list of variables.\\n\\nLabel for the output table: select the name of the output table of the process.\\n\\nReduce Analysis: choose YES to analyze the table with the PROC GREDUCE, will be printed a table with the information about the densities of the shape file.\\n\\nOutput Port: Output table of the process.\\n\\nPLEASE NOTE\\nTo use this custom step is mandatory to download on the server not only the *.shp file, but also all the other shapefile metadata files namely : *.dbf, *.prj, *.shx\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"radiogroup2\": {\n\t\t\t\"value\": \"Yes\"\n\t\t},\n\t\t\"fileorfolderselector1\": \"\",\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"columnselector1\": [],\n\t\t\"inputfield1\": \"\",\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"radiogroup1\": {\n\t\t\t\"value\": \"Yes\"\n\t\t}\n\t}\n}","templates":{"SAS":"cas;\ncaslib _all_ assign;\noptions MSGLEVEL=I;\noption casdatalimit=all mprint symbolgen;\n%let SHAPE = %substr(&fileorfolderselector1,11,%length(&fileorfolderselector1)-10);\n\n%macro reduce();\n\n\t%if \"&radiogroup2\" = \"Yes\" %then \n      %do;\n\n\t\tdata &outputtable1;\n\t\tset work.temp;\n\t\t__seq__ = _n_;\n\t\trun;\n\n\t\tods html ;\n\t\ttitle j=center color=Black \"Example of map using \"\n\t\tunderlin=1 \"&columnselector1\" \n\t\tunderlin=0 \" as ID variable\";\n\n\t\tproc gmap map=&outputtable1 data=&outputtable1 all;\n\t\t   id &columnselector1;\n\t\t   choro &columnselector1 / discrete;\n\t\trun;\n\n\t\tods html close;\n\t\t\n\t\t%if \"&radiogroup1\" = \"Yes\" %then\n\t      %do;\n\t\t\t\n\t\t\tproc  greduce data=&outputtable1 out=&outputtable1;\n\t\t\t\tid &columnselector1;\n\t\t\trun;\n\t\n\t\t\tproc sql noprint;\n\t\t\t\tcreate table Info as\n\t\t\t\tselect\tt1.Density,\n\t\t\t\t\tcount(Density) as N_Points\n\t\t\t\tfrom &outputtable1 t1\n\t\t\t\tgroup by Density;\n\t\t\tquit;\n\t\n\t\t\tdata Info (keep= density N_Points_Cumulative);\n\t\t\t    set info;\n\t\t\t    by DENSITY;\n\t\t\t\tretain cum_N_Points;\n\t\t\t    cum_N_Points+N_Points;\n\t\t\t\trename cum_N_Points = N_Points_Cumulative;\n\t\t\trun;\n\n\t\t\tods html ;\n\t\t\ttitle j=center color=Black \"Number of points for each density\";\n\t\n\t\t\tproc print data=Info;\n\t\t\trun;\n\n\t\t\tods html close;\n\t\n\t\t%end;\n\n   %end;\n   %else %if \"&radiogroup2\" = \"No\" %then\n      %do;\n\n\t\tproc mapimport datafile=\"&SHAPE\" out=&outputtable1;\n\t\t\tid &inputfield1;\n\t\trun;\n\n\t\tdata &outputtable1;\n\t\tset &outputtable1;\n\t\t__seq__ = _n_;\n\t\trun;\n\n\t\tods html ;\n\t\ttitle j=center color=Black \"Example of map using \"\n\t\tunderlin=1 \"&inputfield1\" \n\t\tunderlin=0 \" as ID variable\";\n\n\t\tproc gmap map=&outputtable1 data=&outputtable1 all;\n\t\t   id &inputfield1;\n\t\t   choro &inputfield1 / discrete;\n\t\trun;\n\n\t\tods html close;\n\t\t\n\t\t%if \"&radiogroup1\" = \"Yes\" %then\n\t      %do;\n\t\t\t\n\t\t\tproc  greduce data=&outputtable1 out=&outputtable1;\n\t\t\t\tid &inputfield1;\n\t\t\trun;\n\t\n\t\t\tproc sql noprint;\n\t\t\t\tcreate table Info as\n\t\t\t\tselect\tt1.Density,\n\t\t\t\t\tcount(Density) as N_Points\n\t\t\t\tfrom &outputtable1 t1\n\t\t\t\tgroup by Density;\n\t\t\tquit;\n\t\n\t\t\tdata Info (keep= density N_Points_Cumulative);\n\t\t\t    set info;\n\t\t\t    by DENSITY;\n\t\t\t\tretain cum_N_Points;\n\t\t\t    cum_N_Points+N_Points;\n\t\t\t\trename cum_N_Points = N_Points_Cumulative;\n\t\t\trun;\n\n\t\t\tods html ;\n\t\t\ttitle j=center color=Black \"Number of points for each density\";\n\t\n\t\t\tproc print data=Info;\n\t\t\trun;\n\n\t\t\tods html close;\n\t\n\t\t%end;\n\n\t%end;\n\n%mend reduce;\n\n%reduce();\n\n\n\t\t\t\t\n\n"}}