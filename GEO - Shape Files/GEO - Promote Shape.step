{"type":"code","name":"GEO - Promote Shape.step","displayName":"GEO - Promote Shape.step","description":"","templates":{"SAS":"/* options MSGLEVEL=I; */\n/* option casdatalimit=all mprint symbolgen; */\n\n%let INLIB = %scan(&inputtable1,1,'.');\n%put INLIB = &INLIB;\n\n%let INTABLE = %scan(&inputtable1,2,'.');\n%put INTABLE = &INTABLE;\n\n%let TABLE = %scan(&outputtable1,2,'.');\n%put TABLE = &TABLE;\n\n%let OUTCASLIB = %scan(&outputtable1,1,'.');\n%put OUTCASLIB = &OUTCASLIB;\n\ncas;\ncaslib _ALL_ assign;\n\nproc sql noprint;\n\tselect distinct engine\n\tinto :engine \n\tfrom sashelp.vlibnam\n\twhere libname=upcase(\"&INLIB\");\nquit;\n\n%put engine = &engine;\n\n%macro Promote;\n\t%if (&engine. = V9) %then %do;  \n\t\tproc casutil outcaslib=\"&OUTCASLIB\";\n\t\t\tdroptable casdata=\"&TABLE\" QUIET;\n\t\t\tload data=&inputtable1 casout=\"&TABLE\" promote;\n\t\t\tsave incaslib=\"&OUTCASLIB\" casdata=\"&TABLE\" replace;\n\t\tquit;\n\t%end;\n\t%else %if (&engine. = CAS) %then %do;\n\t\tdata &OUTCASLIB..&TABLE(promote=yes);\n\t\t\tset &INLIB..&INTABLE;\n\t\trun;\n\t\tproc casutil;\n\t\t\tsave incaslib=\"&OUTCASLIB\" casdata=\"&TABLE\" replace;\n\t\tquit;\n\t%end;\n%mend; \n\n%Promote;\n"},"properties":{},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Shape Promote\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input table label\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output table label\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page2\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Promote Shape\\n===========\\n\\nThis custom step allows to load and save a cas table that can be used to create a Geo Provider.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionPrereqs\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"PRE-REQUISITES\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"textPrereqs\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"This custom step can be used after the \\\"Import Shape\\\" or \\\"Apply Shape Reduce\\\" custom step, and must be connected to the output tables of those custom step.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"USERINTERFACE\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"USER INTERFACE\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text3\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"Select the caslib where load and save the table.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"ChangeLog\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Change Log\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"- Version 1.0 (21DEC2023) \\n    - Initial version\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","minEntries":1,"maxEntries":1,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","minEntries":1,"maxEntries":1,"columnDelta":null,"type":"table"}]}}