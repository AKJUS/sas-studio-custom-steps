{"creationTimeStamp":"2023-12-07T09:27:24.369Z","modifiedTimeStamp":"2023-12-21T14:11:52.865Z","createdBy":"itastu","modifiedBy":"itastu","name":"ShapePromote.step","displayName":"ShapePromote.step","localDisplayName":"ShapePromote.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","uri":"/dataFlows/steps/1002c719-58b6-4abe-b17c-b92b70ee654c","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"inputtable1","displayName":"inputtable1","localDisplayName":"inputtable1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[{"name":"outputtable1","displayName":"outputtable1","localDisplayName":"outputtable1","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Shape Promote\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"inputtable1\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input table label\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"readonly\": false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputtable1\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output table label\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page2\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The \\\"ShapePromote\\\" Custom Step allows to load and save a cas table that can be used to create a GeoProvider.\\nThis CS can be used after the \\\"ShapeImport\\\" or \\\"ShapeReduce\\\" CS, and must be connected to the output tables of those CS.\\n\\nUSER INTERFACE\\n\\nSelect the caslib where load and save the table.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"inputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"outputtable1\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t}\n\t}\n}","templates":{"SAS":"/* options MSGLEVEL=I; */\n/* option casdatalimit=all mprint symbolgen; */\n\n%let INLIB = %scan(&inputtable1,1,'.');\n%put INLIB = &INLIB;\n\n%let INTABLE = %scan(&inputtable1,2,'.');\n%put INTABLE = &INTABLE;\n\n%let TABLE = %scan(&outputtable1,2,'.');\n%put TABLE = &TABLE;\n\n%let OUTCASLIB = %scan(&outputtable1,1,'.');\n%put OUTCASLIB = &OUTCASLIB;\n\ncas;\ncaslib _ALL_ assign;\n\nproc sql noprint;\n\tselect distinct engine\n\tinto :engine \n\tfrom sashelp.vlibnam\n\twhere libname=upcase(\"&INLIB\");\nquit;\n\n%put engine = &engine;\n\n%macro Promote;\n\t%if (&engine. = V9) %then %do;  \n\t\tproc casutil outcaslib=\"&OUTCASLIB\";\n\t\t\tdroptable casdata=\"&TABLE\" QUIET;\n\t\t\tload data=&inputtable1 casout=\"&TABLE\" promote;\n\t\t\tsave incaslib=\"&OUTCASLIB\" casdata=\"&TABLE\" replace;\n\t\tquit;\n\t%end;\n\t%else %if (&engine. = CAS) %then %do;\n\t\tdata &OUTCASLIB..&TABLE(promote=yes);\n\t\t\tset &INLIB..&INTABLE;\n\t\trun;\n\t\tproc casutil;\n\t\t\tsave incaslib=\"&OUTCASLIB\" casdata=\"&TABLE\" replace;\n\t\tquit;\n\t%end;\n%mend; \n\n%Promote;\n"}}