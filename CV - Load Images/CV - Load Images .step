{"creationTimeStamp":"2024-07-10T18:42:33.608Z","modifiedTimeStamp":"2024-07-11T22:03:20.969Z","createdBy":"roblan","modifiedBy":"roblan","name":"CV - Load Images .step","displayName":"CV - Load Images .step","localDisplayName":"CV - Load Images .step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff/copy","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","uri":"/dataFlows/steps/60ec854e-848c-4131-be47-b28c677f9cff","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[{"name":"insert_outtab_name","displayName":"insert_outtab_name","localDisplayName":"insert_outtab_name","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"parameters\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Data\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section1\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Input parameters\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_insert_loadimageschoice\",\n\t\t\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\t\t\"label\": \"Load images using:\",\n\t\t\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"full_path_\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Full file path\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"value\": \"realative_file_path_\",\n\t\t\t\t\t\t\t\t\t\"label\": \"File path relative to an existing caslib\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_caslibname\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Name of established caslib:\",\n\t\t\t\t\t\t\t\"placeholder\": \"< caslib name>\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_insert_loadimageschoice\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"realative_file_path_\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_dirpath_img_\",\n\t\t\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\t\t\"label\": \"Parent directory containing the images:\",\n\t\t\t\t\t\t\t\"pathtype\": \"folder\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$_insert_loadimageschoice\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"full_path_\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_dicomyesno_\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"The data consists of DICOM images.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section3\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Advanced Options\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_chkreadpaths\",\n\t\t\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Read paths from a file\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_filepath_\",\n\t\t\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Name of file containing a list of paths:\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"< file >\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"$insert_chkreadpaths\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section4\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Output Data\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"text1\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"The following table must use a CAS engine libref:\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_outtab_name\",\n\t\t\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\t\t\"label\": \"Output table name:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"placeholder\": \"LoadedImages\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"optionspage\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_section1\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Methods\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_addidvar\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Create an ID variable using the filename from the path.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_idvarname\",\n\t\t\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\t\t\"label\": \"Name of ID variable:\",\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"visible\": \"$_addidvar\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_lengthofid\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Length of ID variable:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"integer\": false,\n\t\t\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"stepsize\": 1,\n\t\t\t\t\t\t\t\"visible\": \"$_addidvar\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_insert_recursiveload\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Recursively load images in subdirectories\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_labelcol_\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Create image labels using directory names\",\n\t\t\t\t\t\t\t\"visible\": \"$_insert_recursiveload\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_subdir_labels\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Number of subdirectories to include in the labels:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"integer\": false,\n\t\t\t\t\t\t\t\"min\": null,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"stepsize\": 1,\n\t\t\t\t\t\t\t\"visible\": \"$insert_labelcol_\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_decodeimages\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Decode\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionDisplayImages\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Display Images\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_choicedisplyimages\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Display images\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_numimagetodis_\",\n\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\"label\": \"Number of images to display:\",\n\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"insert_randomimages_chk_\",\n\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\"label\": \"Randomly select images to display\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section5\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Advanced Options\",\n\t\t\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_columnnum_\",\n\t\t\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Number of columns in layout:\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_img_width\",\n\t\t\t\t\t\t\t\t\t\"type\": \"numberfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \" Image width (pixels):\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\t\t\"excludemin\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_img_height\",\n\t\t\t\t\t\t\t\t\t\"type\": \"numberfield\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Image height (pixels):\",\n\t\t\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\t\t\"min\": 0,\n\t\t\t\t\t\t\t\t\t\"excludemin\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_imgtext_font\",\n\t\t\t\t\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Font size (pt):\",\n\t\t\t\t\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\t\t\t\t\"max\": null,\n\t\t\t\t\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"insert_printpaths_\",\n\t\t\t\t\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Print file paths for displayed images\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"about\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"about_text\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Computer Vision (CV) - Load Images\\n==============================\\n\\nThis custom step helps you load images to a SAS Cloud Analytics Services (CAS) table in SAS Viya for purposes of carrying out image analytics.  It uses a CAS action, image.loadImages, from the Image action set, which is provided with the SAS Viya (formerly known as SAS Viya Machine Learning) offering.\\n\\nUse this to create an Analytical Base Table (ABT) for computer vision manipulation and prediction activities. For example, you may like to train a deep learning model for object identification.\\n\\nThis custom step enables you to load even images inside subfolders contained within the specified root folder.  In addition, you may also choose to create a label (represented by a _label_ variable)  containing the folder name from which the image was extracted (often used as the target variable for image classification).\\n\\nThis custom step uses a CAS action which requires a SAS Visual Data Mining and Machine Learning (VDMML) license. VDMML is available with the SAS Viya (formerly known as SAS Viya Machine Learning), SAS Viya Advanced, or SAS Viya Enterprise offering.\\n\\n\\nPrerequisites:\\n\\n1. This custom step runs on data loaded to SAS Cloud Analytics Services (CAS). Ensure you are connected to CAS before running this step.\\n2. Ensure that the root folder containing your images (which may be distributed among different subfolders) is relative to an existing caslib.\\n\\n\\nParameters:\\n\\nInput parameters:\\n\\n1. Caslib name (text field, required): provide a valid caslib name.\\n2.  Relative path (relative to the caslib): provide a path to a root folder containing the images.  A blank value starts at the base location of the caslib.\\n3. Recurse through subdirectories (checked by default): uncheck this box if you do not want to load images which may be contained within subfolders.\\n4. Create label(unchecked by default, optional): check this if you would like to create an additional column called _label_ which contains the name of the folder in which the image resides.\\n\\n\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"section2\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Options\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section6\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Methods\",\n\t\t\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"text3\",\n\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\"text\": \"Create an ID variable using the filename from the path: select to create an ID variable using the filename from the path. This option is valuable when merging labels with images. IMPORTANT: if merging images with labels from a csv file or other table, the variable name (specified in the Name of ID variable option) and length (specified in the Length of ID variable option) should match the name and length of the variable in the labels table.  \\n\\nName of ID variable (Required): specifies the name of the ID variable that will contain the filename for each imported image.\\n\\nLength of ID variable (Required): specifies the length of the ID variable that will contain the filename for each imported image.\\nRecursively load images in subdirectories: select to load images in subdirectories recursively.\\n\\nCreate image labels using directory names: select to create a new variable called _label_ that will contain the name of the folder for which the image was extracted. This option is often used to create a label for images classification when images are stored in respective class folders.\\n\\nNumber of subdirectories to include in the labels: specifies the maximum number of directory levels to include in the label.\\nDecode: select to include decoded images and metadata to the output table.\\n\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"section7\",\n\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\"label\": \"Display Images\",\n\t\t\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"text4\",\n\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\"text\": \"Display images: select to display images.\\n\\nNumber of images to display: select the number of images to display.\\n\\nRandomly select images to display: select to randomly select images to display. If not selected, the images displayed will rely on the data order.\\n\",\n\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"id\": \"section8\",\n\t\t\t\t\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\t\t\t\t\"label\": \"Advanced Options\",\n\t\t\t\t\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\"id\": \"text5\",\n\t\t\t\t\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\t\t\t\t\"text\": \"Number of columns in layout: choose the number of columns when printing images.\\n\\nImage width (pixels): specifies the width of the printed image in terms of the number of pixels. Note, this option is not resizing the image in the output table. The image in the output table remains the same as the original image.\\n\\nImage height (pixels): specifies the height of the printed image in terms of the number of pixels. Note, this option is not resizing the image in the output table. The image in the output table remains the same as the original image.\\n\\nFont size (pt): specifies the size of the text font when printing the image ID or label.\\n\",\n\t\t\t\t\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"text2\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Output specifications:\\n\\n1. Output table (output port, required): connect a CAS table to the output port, to hold the loaded image data.\\n\\nIMPORTANT: Do not attempt to view the output table, since it contains binary data which will often cause the system to hang. Instead, view the message in the results window to understand if images were loaded or not.\\n\\n\\nDocumentation:\\n\\n- The loadImages CAS action : https://go.documentation.sas.com/doc/en/pgmcdc/default/casactml/cas-image-loadimages.htm\\n\\n\\nCreated / contact : \\n\\n- Robert Blanchard (robert.blanchard@sas.com)\\n\\n- Sundaresh Sankaran (sundaresh.sankaran@sas.com)\\n\\n\\nVersion : 2.0.   (11JUL2024)\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"_insert_loadimageschoice\": {\n\t\t\t\"value\": \"full_path_\",\n\t\t\t\"label\": \"Full file path\"\n\t\t},\n\t\t\"insert_caslibname\": \"\",\n\t\t\"insert_dirpath_img_\": \"\",\n\t\t\"_dicomyesno_\": false,\n\t\t\"insert_chkreadpaths\": false,\n\t\t\"insert_filepath_\": \"\",\n\t\t\"insert_outtab_name\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"_addidvar\": false,\n\t\t\"_idvarname\": \"idjoin\",\n\t\t\"_lengthofid\": 31,\n\t\t\"_insert_recursiveload\": true,\n\t\t\"insert_labelcol_\": true,\n\t\t\"insert_subdir_labels\": -1,\n\t\t\"insert_decodeimages\": false,\n\t\t\"insert_choicedisplyimages\": true,\n\t\t\"insert_numimagetodis_\": 5,\n\t\t\"insert_randomimages_chk_\": true,\n\t\t\"insert_columnnum_\": 4,\n\t\t\"insert_img_width\": 128,\n\t\t\"insert_img_height\": 128,\n\t\t\"insert_imgtext_font\": 9,\n\t\t\"insert_printpaths_\": true\n\t}\n}","templates":{"SAS":"\ndata _null_;\ncall symput(\"outputCaslib1\",scan(%cmpres(\"&insert_outtab_name.\"),1,\".\",\"MO\"));\n\ncall symput(\"outputCASTable1\",scan(%cmpres(\"&insert_outtab_name.\"),2,\".\",\"MO\"));\nrun;\n\n\ndata _null_;\nx=\"&insert_dirpath_img_\";\ny=find(x,':');\nz=substr(x,(find(x,':')+1));\ncall symput(\"temppath_lib_\",z);\nrun;\nproc cas;\n   loadactionset 'image';\nrun;\nquit;\n\n/*-----------------------------------------------------------------------------------------*\n   Macro to check if a given libref belongs to a SAS or CAS engine.\n*------------------------------------------------------------------------------------------*/\n\n%macro check_for_caslib(sas_libname);\n \n/* Get a list of available caslibs               */\n/* - Create a table with the caslib names        */\n/* - Create a macro variable witha list of names */\nproc sql noprint;\ncreate table work.list_of_caslibs as\n\tselect libname \n\t\tinto :list_of_caslibs separated by ','\n\tfrom dictionary.libnames\n\twhere upcase(sysname)=\"CASLIB\"\n\torder by libname;\nquit;\n\n\n/* Check the specified caslib in the list of available caslib */\nproc sql noprint;\n\tselect *\n\tfrom work.list_of_caslibs\n\twhere libname = upcase(\"&sas_libname\");\nquit;\n \n/* Use the SQLOBS macro variable. If 1, then the caslib was found */\n%if &sqlobs=1 %then %do;\n\t%put NOTE: ***************************************************;\n\t%put NOTE: The %upcase(&sas_libname) library is a valid Caslib;\n\t%put NOTE: ***************************************************;\n%end;\n%else %do;\n\t%put ERROR: *********************************************************;\n\t%put ERROR: The %upcase(&sas_libname) library is not a valid Caslib.;\n\t%put ERROR: Please specific a library that uses the CAS engine.;\n\t%put ERROR: **********************************************************;\n data _null_;\n\tabort 42;\n run;\n\t/* Terminate execution */\n\t%return;\n%end;\n \n%mend;\n \n \n%check_for_caslib(&outputCaslib1);\n \n \n\n\n\n\n\n\n\ndata _null_;\n\tlocation = scan(\"&insert_dirpath_img_.\", 1, ':', 'MO');\n\tif location eq 'sascontent' then do;\n\t\tputlog \"ERROR: Please ensure that the directory containing images is located in SAS Server not in SAS Content\";\n\t\tabort 42;\n\tend;\n\nrun;\n\n\n\n\n\n\n%macro chkinputimagechoice();\n%if \"&_insert_loadimageschoice\"=\"full_path_\" %then %do;\n/* Create temporary caslib and libref for loading images */\n\tcaslib loadImagesTempCaslib datasource=(srctype=\"path\") \n/* \tpath=\"/mnt/viya-share/data/Cifar10/LargetrainData/\" subdirs notactive; */\n\tpath=\"&temppath_lib_\" subdirs notactive;\n\tlibname _loadtmp cas caslib=\"loadImagesTempCaslib\";\n%end;\n\n\n%mend;\nlibname &outputCaslib1 cas;\n%chkinputimagechoice;\n\n/* Load images */\nproc cas;\n \nverify_inputimagechoice=\"&_insert_loadimageschoice\";\n\t\tif verify_inputimagechoice=\"full_path_\" then do;\n\t\t\tsession %sysfunc(getlsessref(_loadtmp));\n\t\tend;\n\n\t\t\tif &_insert_recursiveload=1 then verify_recursive_load=true;\n\t\t\tif &_insert_recursiveload=0 then verify_recursive_load=false;\n\n\t\t\tif &insert_decodeimages=1 then verify_decodeimages=true;\n\t\t\tif &insert_decodeimages=0 then verify_decodeimages=false;\n\n\t\tif &insert_chkreadpaths=0 then do;\n\t\t\t\tif &insert_labelcol_=1 then do;\t\n\t\t\t\t\t\t\taction image.loadImages result=casOutInfo / caslib=\"loadImagesTempCaslib\" \n\t\t\t\t\t\t\t\tdecode=verify_decodeimages addColumns={\"HEIGHT\", \"WIDTH\"}\n\t\t\t\t\t\t\t\t\trecurse=verify_recursive_load labelLevels=&insert_subdir_labels casOut={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", \n\t\t\t\t\t\t\t\tname=\"&outputCASTable1\", replace=TRUE};\n\t\t\t\tend;\n\t\t\t\tif &insert_labelcol_=0 then do;\t\n\t\t\t\t\t\t\taction image.loadImages result=casOutInfo / caslib=\"loadImagesTempCaslib\" \n\t\t\t\t\t\t\t\tdecode=verify_decodeimages addColumns={\"HEIGHT\", \"WIDTH\"} recurse=verify_recursive_load casOut={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", \n\t\t\t\t\t\t\t\tname=\"&outputCASTable1\", replace=TRUE};\n\t\t\t\tend;\n\t\tend;\n\n\t\tif &insert_chkreadpaths=1 then do;\t\n\t\t\taction image.loadImages result=casOutInfo / path=\"&insert_filepath_\"caslib=\"loadImagesTempCaslib\" \n\t\t\t\t\tdecode=TRUE addColumns={\"HEIGHT\", \"WIDTH\"} recurse=TRUE labelLevels=&insert_subdir_labels casOut={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", \n\t\t\t\t\tname=\"&outputCASTable1\", replace=TRUE};\n\t\tend;\n\n\n/* Export DICOM images */\n\t\tif &_dicomyesno_=1 and &insert_labelcol_=0 then do;\n\t\t\tbioMedImage.processBioMedImages / \n\t\t\t\t\t\t\t\t\tcopyVars={\"_path_\", \"_id_\", \"HEIGHT\", \"WIDTH\"}\n \t\t\t\t\t\t\t\t\timages={table={name=\"&outputCASTable1\", caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\"}}\n\t \t\t\t\t\t\t\t\tsteps={{step={stepType=\"EXPORT\"}}}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tcasOut={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", name=\"&outputCASTable1\", replace=TRUE}; \n\t\tend;\t\t\n\t\tif &_dicomyesno_=1 and &insert_labelcol_=1 then do;\n\t\t\tbioMedImage.processBioMedImages / \n\t\t\t\t\t\t\t\t\tcopyVars={\"_path_\",\"_label_\", \"_id_\", \"HEIGHT\", \"WIDTH\"}\n \t\t\t\t\t\t\t\t\timages={table={name=\"&outputCASTable1\", caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\"}}\n\t \t\t\t\t\t\t\t\tsteps={{step={stepType=\"EXPORT\"}}}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tcasOut={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", name=\"&outputCASTable1\", replace=TRUE}; \n\t\tend;\t\t\n\n\n\n\t\tif &_addidvar=1 then do;\n\t\t\ttable.partition / table={name=\"&outputCASTable1\",computedVars={{name=\"&_idvarname\"}},\n \t\t\t\t\t\t\t\t computedVarsProgram=\"length &_idvarname $&_lengthofid;\n\t\t\t\t\t\t\t\t &_idvarname=scan(_path_,-1,'/');&_idvarname=scan(&_idvarname,1,'.');\"}\n\t\t\tcasout={name=\"&outputCASTable1\", caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\",replace=TRUE};\n\n\t\t\ttable.alterTable /  name=\"&outputCASTable1\", caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\" \n\t\t\t\t\tcolumns={{name=\"&_idvarname\", format=\"$&_lengthofid.\"}};\n\t\t\tend;\n\n\n\n\t\tif &insert_randomimages_chk_=1 and &insert_labelcol_=1 then do;\n\t/* Randomly select images to display */\n\tnRows=max(casOutInfo.OutputCasTables[1, \"Rows\"], 1);\n\t_sampPct_=min(&insert_numimagetodis_/nRows*100, 100);\n\taction sampling.srs / table={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", \n\t\tname=\"&outputCASTable1\"}, sampPct=_sampPct_, display={excludeAll=TRUE}, \n\t\toutput={casOut={caslib=\"&outputCaslib1\", name=\"_tempDisplayTable_\", replace=TRUE}, \n\t\tcopyVars={\"_path_\" , \"_label_\" , \"_id_\"}};\n\t\tend;\n\n\t\tif &insert_randomimages_chk_=1 and &insert_labelcol_=0 then do;\n\t/* Randomly select images to display */\n\tnRows=max(casOutInfo.OutputCasTables[1, \"Rows\"], 1);\n\t_sampPct_=min(&insert_numimagetodis_/nRows*100, 100);\n\taction sampling.srs / table={caslib=\"%sysfunc(getlcaslib(&outputCaslib1))\", \n\t\tname=\"&outputCASTable1\"}, sampPct=_sampPct_, display={excludeAll=TRUE}, \n\t\toutput={casOut={caslib=\"&outputCaslib1\", name=\"_tempDisplayTable_\", replace=TRUE}, \n\t\tcopyVars={\"_path_\" , \"_id_\"}};\n\t\tend;\n\nquit;\n\n\n\n%macro chkvisualizeimages();\n\n%if &insert_choicedisplyimages=1 and &_dicomyesno_=0 %then %do;\n\t%if &insert_randomimages_chk_=1 %then %do;\n\n/* Display images */\ndata &outputCaslib1.._tempDisplayTable_;\n\tset &outputCaslib1.._tempDisplayTable_ end=eof;\n\t_labelID_=cat(_label_, ' (_id_=', _id_, ')');\n\n\tif _n_=1 then\n\t\tdo;\n\t\t\tdcl odsout obj();\n\t\t\tobj.layout_gridded(columns: &insert_columnnum_);\n\t\tend;\n\tobj.region();\n\tobj.format_text(text: _labelID_, just: \"c\", style_attr: \"font_size=&insert_imgtext_font..pt\");\n\tobj.image(file: _path_, width: \"&insert_img_width\", height: \"&insert_img_height\");\n\n\tif eof then\n\t\tdo;\n\t\t\tobj.layout_end();\n\t\tend;\n\t%end;\n\t%if &insert_randomimages_chk_=0 %then %do;\n\n/* Display images */\ndata &outputCaslib1.._tempDisplayTable_;\n\tset &outputCaslib1..&outputCASTable1 end=eof;\n\t_labelID_=cat(_label_, ' (_id_=', _id_, ')');\n\n\tif _n_=1 then\n\t\tdo;\n\t\t\tdcl odsout obj();\n\t\t\tobj.layout_gridded(columns: &insert_columnnum_);\n\t\tend;\n\tobj.region();\n\tobj.format_text(text: _labelID_, just: \"c\", style_attr: \"font_size=&insert_imgtext_font..pt\");\n\tobj.image(file: _path_, width: \"&insert_img_width\", height: \"&insert_img_height\");\n\n\tif eof then\n\t\tdo;\n\t\t\tobj.layout_end();\n\t\tend;\n\t%end;\n%end;\n%mend;\n%chkvisualizeimages;\n\n\n\n\n/* Print file paths for the displayed images and drop the temporary table */\nproc cas;\nif &insert_printpaths_=1 then do;\n\tsession %sysfunc(getlsessref(&outputCaslib1));\n\taction table.fetch / table={caslib=\"&outputCaslib1\" name=\"_tempDisplayTable_\"} \n\t\tfetchvars={'_path_', '_label_', '_id_'};\n\taction table.dropTable / caslib=\"&outputCaslib1\" name=\"_tempDisplayTable_\";\nend;\nquit;\n\n\n\n\n/* Remove temporary caslib and libref */\ncaslib loadImagesTempCaslib drop;\nlibname _loadtmp;\n/* libname &outputCaslib1; */\n\n\n%SYMDEL \n\toutputCaslib1\n\toutputCASTable1\n\ttemppath_lib_\n\t;\n\n\n\n\n%SYSMACDELETE \n\tchkinputimagechoice\n\tchkvisualizeimages\n\tcheck_for_caslib\n\t;\n\n"}}