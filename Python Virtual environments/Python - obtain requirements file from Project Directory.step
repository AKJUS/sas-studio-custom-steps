{"creationTimeStamp":"2022-07-11T15:41:34.582Z","modifiedTimeStamp":"2022-07-11T15:42:29.748Z","createdBy":"sinsrn","modifiedBy":"sinsrn","name":"Python - obtain requirements file from Python Project Directory.step","displayName":"Python - obtain requirements file from Python Project Directory.step","localDisplayName":"Python - obtain requirements file from Python Project Directory.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","uri":"/dataFlows/steps/01377e52-267f-4a9b-834c-c3cc59456ed3","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"About\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"About_text\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Python - obtain requirements file from Project Directory\\n\\nThe \\\"Python - obtain requirements file from Project Directory\\\" custom step helps users generate a relevant, more compact requirements.txt for a project containing one or more Python programs.  The resulting requirements.txt can be used for specifying configuration for a virtual environment meant for running the said project.\\n\\nProvide a path to the folder on your filesystem where your project-specific Python programs are located. In addition, also provide a path (containing the name of the desired requirements.txt file) where you want the requirements.txt to be saved. \\n\\nNote that this step is based on a Python package called pipreqs - https://pypi.org/project/pipreqs/.   Your Python environment will need to have pipreqs installed (Hint : you can easily install using the \\\"Python - Create a virtual environment\\\" custom Step).  Note that pipreqs is not completely foolproof, however.\\n\\nCreated / contact : Sundaresh Sankaran (sundaresh.sankaran@sas.com) \\n\\nVersion : 1.0.   Jul 11 2022\\n\\nFor original inspiration, refer https://blogs.sas.com/content/subconsciousmusings/2022/05/16/python-a-la-carte/\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Parameters\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"projectarea\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Enter path where Python programs are located.\",\n\t\t\t\t\t\"placeholder\": \"/path/to/python/project\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"resultloc\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Enter filename (with full path) to save results to.\",\n\t\t\t\t\t\"placeholder\": \"/path/to/requirements.txt\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"projectarea\": \"\",\n\t\t\"resultloc\": \"\"\n\t}\n}","templates":{"SAS":"/* SAS templated code goes here */\n\nproc python;\n\nsubmit;\n\n\nprojectarea=SAS.symget(\"projectarea\")\nresultloc=SAS.symget(\"resultloc\")\n\nimport os\nos.system(\"{} -m pipreqs.pipreqs --save {}  --force {}\".format(os.environ[\"PROC_PYPATH\"],resultloc,projectarea))\n\nendsubmit;\n\n\nquit;"}}
